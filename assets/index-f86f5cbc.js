import{_ as V,a as C,b as p,o as m,c as b,f as g,d as c,w as h,h as k,i as M,t as D,n as B,j,v as S,F as w,k as I,l as H,e as N,r as R,p as U,g as z}from"./index-81f8df50.js";import{V as A}from"./index-5328af5e.js";const E={class:"tree-node"},F={key:0,class:"tree-node-children"},W={__name:"tree-node",props:{node:{type:Object,default:()=>({})}},setup(o){const u=C(o.node.expanded),r=()=>{u.value=!u.value};return(d,v)=>{const _=p("CaretBottom"),x=p("CaretRight"),i=p("el-icon"),t=p("TreeNode",!0);return m(),b("div",E,[g("div",{class:"tree-node-content",style:B({"padding-left":o.node.level*18+"px"}),onClick:r},[c(i,{class:"tree-node-expand-icon"},{default:h(()=>[o.node.data.children&&u.value?(m(),k(_,{key:0})):o.node.data.children?(m(),k(x,{key:1})):M("",!0)]),_:1}),g("span",null,D(o.node.data.label),1)],4),o.node.data.children?j((m(),b("div",F,[(m(!0),b(w,null,I(o.node.data.children,l=>(m(),k(t,{key:l.id,node:l},null,8,["node"]))),128))],512)),[[S,u.value]]):M("",!0)])}}},O=V(W,[["__scopeId","data-v-ea105630"]]);const P={class:"tree"},q={class:"tree-content"},G={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0}},setup(o){const a=o,u=C(r(a.data,0));function r(d,v){return d.map((_,x)=>{const i={id:`${Date.now()}-${x}`,level:v,expanded:!1,data:{}};return _.children?i.data={..._,children:r(_.children,v+1)}:i.data=_,i})}return H(()=>a.data,d=>{u.value=r(d,0)}),(d,v)=>(m(),b("div",P,[g("div",{class:"tree-inner",style:B({"max-height":o.maxHeight+"px"})},[g("div",q,[(m(!0),b(w,null,I(u.value,_=>(m(),k(O,{key:_.id,node:_},null,8,["node"]))),128))])],4)]))}},J=V(G,[["__scopeId","data-v-5c689af5"]]);const K={class:"wrap"},Q=400,X={__name:"tree",setup(o){const a=C([]);let u=[5,4,3,3],r=0;d();function d(){u=x(),r=0,a.value=v(0,u[0])}function v(i,t){if(!t)return;const l=[];let e={};for(let n=0;n<t;n++)r++,e={label:`${r} --- ${_()}`,children:v(i+1,u[i+1])},l.push(e);return l}function _(){const i=["a","b","c","d","e","f","g","h","i","j","k"],t=Math.ceil(Math.random()*10);return i.slice(0,t).join("")}function x(){const i=[],t=Math.ceil(Math.random()*4);for(let l=0;l<t;l++)i.push(Math.ceil(Math.random()*10));return i}return(i,t)=>{const l=p("el-button"),e=p("el-form-item"),n=p("el-form");return m(),b("div",null,[c(n,{inline:""},{default:h(()=>[c(e,null,{default:h(()=>[c(l,{type:"primary",onClick:d},{default:h(()=>[N("更新列表")]),_:1})]),_:1})]),_:1}),g("div",K,[c(J,{data:a.value,"max-height":Q},null,8,["data"])])])}}},Y=V(X,[["__scopeId","data-v-995c16b0"]]);const Z={class:"tree"},ee=["onClick"],te={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},cache:{type:Number,default:2},buffer:{type:Number,default:1}},setup(o){const a=o;let u=-1,r=[];const d=C([]);function v(){return r.filter(t=>t.level===0)}function _(t,l){let e=[];return t.forEach(n=>{u++,e.push({id:`${Date.now()}-${u}`,index:u,level:l,leaf:!(n.children&&n.children.length>0),expanded:!1,data:x(n)}),n.children&&n.children.length>0&&(e=e.concat(_(n.children,l+1)))}),e}function x(t){let l={};for(const e in t)e!=="children"&&(l[e]=t[e]);return l}H(()=>a.data,t=>{u=-1,r=_(t,0),d.value=v()},{immediate:!0,deep:!0});const i=t=>{if(!t.leaf)if(t.expanded){t.expanded=!1;let l=d.value.findIndex(e=>e.id===t.id);for(let e=l+1;e<d.value.length&&d.value[e].level>t.level;e++)d.value.splice(e,1),e--}else{t.expanded=!0;const l=[];for(let e=t.index+1;e<r.length&&r[e].level>t.level;e++)r[e].level===t.level+1&&l.push(r[e]);d.value.some((e,n)=>{if(e.id===t.id)return d.value.splice(n+1,0,...l),!0})}};return(t,l)=>{const e=p("CaretBottom"),n=p("CaretRight"),s=p("el-icon");return m(),b("div",Z,[c(A,{data:d.value,"max-height":o.maxHeight,buffer:o.buffer,cache:o.cache},{default:h(({item:f})=>[g("div",{class:"tree-node-content",style:B({"padding-left":f.level*18+"px"}),onClick:y=>i(f)},[c(s,{class:"tree-node-expand-icon"},{default:h(()=>[!f.leaf&&f.expanded?(m(),k(e,{key:0})):f.leaf?M("",!0):(m(),k(n,{key:1}))]),_:2},1024),g("span",null,D(f.data.label),1)],12,ee)]),_:1},8,["data","max-height","buffer","cache"])])}}},ne=V(te,[["__scopeId","data-v-72c5fee2"]]);const ae={class:"wrap"},le=400,oe={__name:"virtual-tree",setup(o){const a=R({total:1e3,buffer:0,cache:2}),u=C([]),r=C(0),d=C(2);let v=[5,4,3,3],_=0;x();function x(){v=l(),_=0,u.value=i(0,v[0]),r.value=a.buffer,d.value=a.cache}function i(n,s){if(!s)return;const f=[];let y={};for(let T=0;T<s;T++)_++,y={label:`${_} --- ${t()}`,children:i(n+1,v[n+1])},f.push(y);return f}function t(){const n=["a","b","c","d","e","f","g","h","i","j","k"],s=Math.ceil(Math.random()*10);return n.slice(0,s).join("")}function l(){const n=[],s=Math.ceil(Math.random()*4);for(let f=0;f<s;f++)n.push(Math.ceil(Math.random()*10));return n}function e(n){a[n]!==""&&typeof a[n]=="string"&&(a[n]=a[n].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),a[n]=Number(a[n]))}return(n,s)=>{const f=p("el-input"),y=p("el-form-item"),T=p("el-button"),L=p("el-form");return m(),b("div",null,[c(L,{inline:""},{default:h(()=>[c(y,{label:"列表总数"},{default:h(()=>[c(f,{modelValue:a.total,"onUpdate:modelValue":s[0]||(s[0]=$=>a.total=$),modelModifiers:{number:!0},placeholder:"请输入列表总数",maxlength:"6",onBlur:s[1]||(s[1]=$=>e("total"))},null,8,["modelValue"])]),_:1}),c(y,{label:"缓冲量"},{default:h(()=>[c(f,{modelValue:a.buffer,"onUpdate:modelValue":s[2]||(s[2]=$=>a.buffer=$),modelModifiers:{number:!0},placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:s[3]||(s[3]=$=>e("buffer"))},null,8,["modelValue"])]),_:1}),c(y,{label:"预先多加载的列表数量"},{default:h(()=>[c(f,{modelValue:a.cache,"onUpdate:modelValue":s[4]||(s[4]=$=>a.cache=$),modelModifiers:{number:!0},placeholder:"请输入预先多加载的列表数量",maxlength:"5",onBlur:s[5]||(s[5]=$=>e("cache"))},null,8,["modelValue"])]),_:1}),c(y,null,{default:h(()=>[c(T,{type:"primary",onClick:x},{default:h(()=>[N("更新列表")]),_:1})]),_:1})]),_:1}),g("div",ae,[c(ne,{data:u.value,"max-height":le,buffer:r.value,cache:d.value},null,8,["data","buffer","cache"])])])}}},re=V(oe,[["__scopeId","data-v-bdfc5281"]]);const de=o=>(U("data-v-52b6afbe"),o=o(),z(),o),ce=de(()=>g("div",{class:"title"},"Tree 树形控件",-1)),se={__name:"index",setup(o){return(a,u)=>{const r=p("el-tab-pane"),d=p("el-tabs");return m(),b(w,null,[ce,c(d,{"model-value":"1"},{default:h(()=>[c(r,{label:"树形控件",name:"1"},{default:h(()=>[c(Y)]),_:1}),c(r,{label:"虚拟树形控件",name:"2",lazy:""},{default:h(()=>[c(re)]),_:1})]),_:1})],64)}}},_e=V(se,[["__scopeId","data-v-52b6afbe"]]);export{_e as default};
