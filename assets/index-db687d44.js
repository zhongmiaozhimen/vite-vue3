import{_ as A,r as p,C as J,D as P,o as i,c,a as _,k as Q,n as $,E as I,F as C,m as E,x as k,y as O,e as F,t as M,j as N,b as y,z as X,h as q,d as w,g as V,p as Y,f as Z}from"./index-91a48a92.js";import{_ as ee}from"./index-19276679.js";import{u as te}from"./resizeObserver-73741452.js";const le={class:"table-header-wrapper"},ae={class:"table-row"},oe=["onMouseover","onMouseout"],se={key:0,class:"cover"},ne={class:"table-body-wrapper"},re=["onMouseover","onMouseout"],H=100,ie={__name:"index",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(m){const t=m,h=p([]),n=p([]);let f=0;const l=p(!1);h.value=t.data.map((e,o)=>({id:`row-${Date.now()}-${o}`,data:e})),n.value=t.columns.map((e,o)=>{let a="";(e.fixed==="left"||e.fixed==="right")&&(a=`${e.fixed}-fixed`);const s=e.minWidth||H;return f+=s,{id:`column-${Date.now()}-${o}`,minWidth:s,className:a,data:e}}),t.columns.some((e,o)=>{if(e.fixed==="left"&&t.columns[o+1].fixed!=="left")return n.value[o].className+=" last-left-fixed",!0}),n.value.some((e,o)=>{if(e.data.fixed==="right")return n.value[o].className+=" first-right-fixed",l.value=!0,!0});const d=p(null),u=p(null),r=p(null),b=p(!1),x=p(!1),g=p(""),L=p(null);let T=null;const j=()=>{let e=0,o=null,a=null;for(let s=0;s<t.columns.length;s++)t.columns[s].fixed==="left"?(o=e,e+=t.columns[s].minWidth||H):o=null,n.value[s].left=o;e=0;for(let s=t.columns.length-1;s>=0;s--)t.columns[s].fixed==="right"?(a=e,e+=t.columns[s].minWidth||H):a=null,n.value[s].right=a};j();let W=!1;const U=e=>{if(!b.value||W)return;W=!0,requestAnimationFrame(()=>{W=!1});const o=e.target.scrollLeft;u.value.scrollLeft=o;const a=r.value.scrollWidth-r.value.clientWidth-1;o>=a?g.value="scrolling-right":o===0?g.value="scrolling-left":g.value="scrolling-middle"},z=(e,o)=>{o.showOverflowTooltip&&(L.value=e.target)},B=()=>{L.value=null},R=e=>{T=e.target},S=e=>{u.value.contains(T)&&(e.keyCode===40||e.keyCode===38)&&e.preventDefault()},G=()=>{r.value.clientWidth<f?(b.value=!0,g.value="scrolling-left"):(b.value=!1,g.value=""),r.value.scrollHeight>r.value.clientHeight?x.value=!0:x.value=!1,X(()=>{u.value.scrollLeft=r.value.scrollLeft,j()})};return J(()=>{te(d.value,G),document.addEventListener("click",R),document.addEventListener("keydown",S)}),P(()=>{document.removeEventListener("click",R),document.removeEventListener("keydown",S)}),(e,o)=>(i(),c("div",{ref_key:"tableRef",ref:d,class:k(["table",b.value&&"horizontal-scroll",x.value&&"vertical-scroll",g.value])},[_("div",le,[_("div",{ref_key:"tableHeaderRef",ref:u,class:"table-header",onWheel:o[0]||(o[0]=Q(()=>{},["prevent"])),onKeydown:S},[_("div",{class:"table-header-content",style:$({height:x.value?"50px":"","min-width":I(f)+"px"})},[_("div",ae,[(i(!0),c(C,null,E(n.value,a=>(i(),c("div",{key:a.id,class:k(["table-cell",a.className]),style:$({left:a.left+"px",right:a.right+"px"}),onMouseover:s=>z(s,a.data),onMouseout:s=>B(s,a.data)},[_("div",{class:k(["cell-inner",a.data.showOverflowTooltip&&"tooltip"])},[O(e.$slots,"headerCell",{prop:a.data.prop},()=>[F(M(a.data.label),1)],!0)],2)],46,oe))),128))])],4)],544),l.value?(i(),c("div",se)):N("",!0)]),_("div",ne,[_("div",{ref_key:"tableBodyRef",ref:r,class:"table-body",style:{"max-height":"460px"},onScroll:U},[_("div",{class:"table-body-content",style:$({"min-width":I(f)+"px"})},[(i(!0),c(C,null,E(h.value,(a,s)=>(i(),c("div",{key:a.id,class:"table-row"},[(i(!0),c(C,null,E(n.value,v=>(i(),c("div",{key:v.id,class:k(["table-cell",v.className]),style:$({left:v.left+"px",right:v.right+"px"}),onMouseover:D=>z(D,v.data),onMouseout:D=>B(D,v.data)},[_("div",{class:k(["cell-inner",v.data.showOverflowTooltip&&"tooltip"])},[O(e.$slots,"bodyCell",{index:s,row:a.data,prop:v.data.prop},()=>[F(M(a.data[v.data.prop]),1)],!0)],2)],46,re))),128))]))),128))],4)],544)]),y(ee,{"mouseenter-el":L.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])],2))}},K=A(ie,[["__scopeId","data-v-ae5dff85"]]),de={key:0},ce=["onClick"],ue={__name:"index",setup(m){const t=[],h=[],n=()=>{console.log("--详情--")},f=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],d=Math.ceil(Math.random()*10);return l.slice(0,d).join("")};for(let l=1;l<=5;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.push({prop:"opt",label:"操作"});for(let l=1;l<=15;l++){let d={};t.forEach(u=>{d[u.prop]=f()}),h.push(d)}return(l,d)=>(i(),q(K,{data:h,columns:t},{bodyCell:w(({row:u,prop:r,index:b})=>[r==="index"?(i(),c("span",de,M(b+1),1)):r==="opt"?(i(),c("span",{key:1,onClick:x=>n(u)},"详情",8,ce)):N("",!0)]),_:1}))}},fe={key:0},pe=["onClick"],_e={__name:"index2",setup(m){const t=[],h=[],n=()=>{console.log("--详情--")},f=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],d=Math.ceil(Math.random()*10);return l.slice(0,d).join("")};for(let l=1;l<=5;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.unshift({prop:"index2",label:"序号2",fixed:"left"}),t.unshift({prop:"index",label:"序号",fixed:"left"}),t.push({prop:"opt",label:"操作",fixed:"right"}),t.push({prop:"opt2",label:"操作2",fixed:"right"});for(let l=1;l<=15;l++){let d={};t.forEach(u=>{d[u.prop]=f()}),h.push(d)}return(l,d)=>(i(),q(K,{data:h,columns:t},{bodyCell:w(({row:u,prop:r,index:b})=>[r==="index"||r==="index2"?(i(),c("span",fe,M(b+1),1)):r==="opt"||r==="opt2"?(i(),c("span",{key:1,onClick:x=>n(u)},"详情",8,pe)):N("",!0)]),_:1}))}};const he=m=>(Y("data-v-f342f3ea"),m=m(),Z(),m),ve=he(()=>_("div",{class:"title"},"表格",-1)),me={__name:"index",setup(m){return(t,h)=>{const n=V("el-tab-pane"),f=V("el-tabs");return i(),c(C,null,[ve,y(f,{"model-value":"1"},{default:w(()=>[y(n,{label:"表格 1",name:"1"},{default:w(()=>[y(ue)]),_:1}),y(n,{label:"表格 2（固定列）",name:"2",lazy:""},{default:w(()=>[y(_e)]),_:1})]),_:1})],64)}}},ye=A(me,[["__scopeId","data-v-f342f3ea"]]);export{ye as default};
