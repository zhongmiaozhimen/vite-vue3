import{_ as C,r as N,o as I,c as Y,F as G,m as K,n as U,t as k,a as L,b as X,d as W,p as Q,f as R}from"./index-d44a67cc.js";import{E as Z,a as tt}from"./el-tab-pane-1ade4771.js";import"./strings-fc67653f.js";const ot=["onMousedown","onTouchstart","onTouchmove","onTouchend"],_=50,E=10,nt={__name:"list-drag",setup(T){const u=N("text"),n=N([]);["a","b","c","d","e","f","g"].forEach((s,a)=>{n.value.push({id:`${Date.now()}-${a}`,index:a,top:10+(_+E)*a,transition:"",zIndex:0,constant:s})});const g=n.value.length,m=g*_+(g-1)*E+10*2;let y=0,p=0,S=0;function z(s,a){const c=a-y;let l=S+c;const H=0,t=m-_;l<H?l=H:l>t&&(l=t),s.top=l;const e=s.top+_/2;for(let o=0;o<n.value.length;o++)if(s.index!==n.value[o].index&&e>n.value[o].top&&e<n.value[o].top+_){s.index=n.value[o].index,n.value[o].index=p,n.value[o].top=p*(_+E)+10,n.value[o].transition="top 0.3s linear 0s",p=s.index;break}}const b=function(s,a){u.value="none",y=s.clientY,p=a.index,S=a.top,i(a),w(a)};function i(s){document.onmousemove=function(a){s.zIndex=99,s.transition="",z(s,a.clientY)}}function w(s){document.onmouseup=function(){s.top=p*(_+E)+10,s.zIndex=0,u.value="text",document.onmousemove=null}}function $(s,a){u.value="none",y=s.targetTouches[0].clientY,p=a.index,S=a.top}function F(s,a){a.zIndex=99,a.transition="";const c=s.targetTouches[0];z(a,c.clientY)}function V(s){s.top=p*(_+E)+10,s.zIndex=0,u.value="text"}return(s,a)=>(I(),Y("div",{class:"drag-list",style:U({height:m+"px",userSelect:u.value})},[(I(!0),Y(G,null,K(n.value,c=>(I(),Y("div",{key:c.id,class:"drag-list-item",style:U({height:_+"px",top:c.top+"px",transition:c.transition,"z-index":c.zIndex}),onMousedown:l=>b(l,c),onTouchstart:l=>$(l,c),onTouchmove:l=>F(l,c),onTouchend:l=>V(c)},k(c.constant)+" --- top: "+k(c.top.toFixed()),45,ot))),128))],4))}},et=C(nt,[["__scopeId","data-v-08843f33"]]);const st=["onMousedown","onTouchstart","onTouchmove","onTouchend"],v=100,h=100,f=10,r=3,at={__name:"grid-drag",setup(T){const u=N("text"),n=N([]),M=["a","b","c","d","e","f","g"];let g=0,m=0;M.forEach((t,e)=>{g=10+(v+f)*(e%r),m=10+(h+f)*Math.floor(e/r),n.value.push({id:`${Date.now()}-${e}`,index:e,left:g,top:m,transition:"",zIndex:0,constant:t})});const y=n.value.length,p=r*v+(r-1)*f+20,S=Math.ceil(y/r)*h+(r-1)*f+20;let z=0,b=0,i=0,w=0,$=0;function F(t,e,o){const x=e-z,O=o-b;let D=w+x,P=$+O;const B=0,j=p-v,q=S-h;D<B?D=B:D>j&&(D=j),P<B?P=B:P>q&&(P=q),t.left=D,t.top=P;const A=t.left+v/2,J=t.top+h/2;for(let d=0;d<n.value.length;d++)if(t.index!==n.value[d].index&&A>n.value[d].left&&A<n.value[d].left+v&&J>n.value[d].top&&J<n.value[d].top+h){t.index=n.value[d].index,n.value[d].index=i,n.value[d].left=(v+f)*(i%r)+10,n.value[d].top=(h+f)*Math.floor(i/r)+10,n.value[d].transition="left 0.3s linear,top 0.3s linear",i=t.index;break}}const V=function(t,e){u.value="none",z=t.clientX,b=t.clientY,i=e.index,w=e.left,$=e.top,s(e),a(e)};function s(t){document.onmousemove=function(e){t.zIndex=99,t.transition="",F(t,e.clientX,e.clientY)}}function a(t){document.onmouseup=function(){t.left=(v+f)*(i%r)+10,t.top=(h+f)*Math.floor(i/r)+10,t.zIndex=0,u.value="text",document.onmousemove=null}}function c(t,e){u.value="none";const o=t.targetTouches[0];z=o.clientX,b=o.clientY,i=e.index,w=e.left,$=e.top}function l(t,e){e.zIndex=99,e.transition="";const o=t.targetTouches[0];F(e,o.clientX,o.clientY)}function H(t){t.left=(v+f)*(i%r)+10,t.top=(h+f)*Math.floor(i/r)+10,t.zIndex=0,u.value="text"}return(t,e)=>(I(),Y("div",{class:"drag-list",style:U({width:p+"px",height:S+"px",userSelect:u.value})},[(I(!0),Y(G,null,K(n.value,o=>(I(),Y("div",{key:o.id,class:"drag-list-item",style:U({width:v+"px",height:h+"px",top:o.top+"px",left:o.left+"px",transition:o.transition,"z-index":o.zIndex}),onMousedown:x=>V(x,o),onTouchstart:x=>c(x,o),onTouchmove:x=>l(x,o),onTouchend:x=>H(o)},[L("div",null,k(o.constant),1),L("div",null,"left: "+k(o.left.toFixed()),1),L("div",null,"top: "+k(o.top.toFixed()),1)],44,st))),128))],4))}},ct=C(at,[["__scopeId","data-v-cb7f4ef2"]]);const lt=T=>(Q("data-v-ff6ce70d"),T=T(),R(),T),ut=lt(()=>L("div",{class:"title"},"元素拖拽",-1)),it={__name:"index",setup(T){return(u,n)=>{const M=tt,g=Z;return I(),Y(G,null,[ut,X(g,{"model-value":"1"},{default:W(()=>[X(M,{label:"列表",name:"1"},{default:W(()=>[X(et)]),_:1}),X(M,{label:"网格",name:"2",lazy:""},{default:W(()=>[X(ct)]),_:1})]),_:1})],64)}}},ft=C(it,[["__scopeId","data-v-ff6ce70d"]]);export{ft as default};
