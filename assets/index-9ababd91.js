import{_ as H}from"./index-dd377a18.js";import{_ as j,a as p,C as E,I,o as r,c as n,f as h,n as M,E as R,F as k,m as $,x as b,y as D,d as V,e as O,t as W,h as A,w as F,j as L}from"./index-d2a1e12a.js";const q={class:"table-header"},U={class:"table-row"},G=["onMouseover","onMouseout"],J={class:"table-body"},K=["onMouseover","onMouseout"],P=100,Q={__name:"index",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(C){const o=C,m=p([]),u=p([]);let x=0;m.value=o.data.map((e,s)=>({id:`row-${Date.now()}-${s}`,data:e})),u.value=o.columns.map((e,s)=>{const t=e.minWidth||P;x+=t;let d="";return(e.fixed==="left"||e.fixed==="right")&&(d=`fixed-${e.fixed}`),{id:`column-${Date.now()}-${s}`,minWidth:t,className:d,data:e}}),o.columns.some((e,s)=>{if(e.fixed==="left"&&o.columns[s+1].fixed!=="left")return u.value[s].className+=" last-fixed-left",!0});const a=o.columns.findIndex(e=>e.fixed==="right");a>=0&&(u.value[a].className+=" first-fixed-right");const l=p(null),i=p(!1),_=p(!1);let f=0;const v=p(""),g=p(null),T=()=>{l.value.scrollWidth>l.value.clientWidth?i.value=!0:i.value=!1,l.value.scrollHeight>l.value.clientHeight?_.value=!0:_.value=!1,f=l.value.scrollWidth-l.value.clientWidth,i.value&&f>0?v.value="scrolling-left":v.value=""},B=e=>{if(f===0)return;const s=e.target.scrollLeft,t=Math.abs(f-s);s===0?v.value="scrolling-left":s===f||t<=1?v.value="scrolling-right":v.value="scrolling-middle"},N=(e,s)=>{s.showOverflowTooltip&&(g.value=e.target)},S=()=>{g.value=null};let y=!1;const z=new ResizeObserver(()=>{y||(y=!0,requestAnimationFrame(()=>{y=!1}),T())});return E(()=>{z.observe(l.value)}),I(()=>{z.unobserve(l.value)}),(e,s)=>(r(),n("div",{class:b(["table",i.value&&"horizontal-scroll",_.value&&"vertical-scroll",v.value])},[h("div",{ref_key:"tableRef",ref:l,class:"table-inner","on:onScroll":B},[h("div",{class:"table-content",style:M({"min-width":R(x)+"px"})},[h("div",q,[h("div",U,[(r(!0),n(k,null,$(u.value,t=>(r(),n("div",{key:t.id,class:b(["table-cell",t.className]),style:M({"min-width":t.minWidth+"px"}),onMouseover:d=>N(d,t.data),onMouseout:d=>S(d,t.data)},[h("div",{class:b(["cell-inner",t.data.showOverflowTooltip&&"tooltip"])},[D(e.$slots,"headerCell",{prop:t.data.prop},()=>[O(W(t.data.label),1)],!0)],2)],46,G))),128))])]),h("div",J,[(r(!0),n(k,null,$(m.value,(t,d)=>(r(),n("div",{key:t.id,class:"table-row"},[(r(!0),n(k,null,$(u.value,c=>(r(),n("div",{key:c.id,class:b(["table-cell",c.className]),style:M({"min-width":c.minWidth+"px"}),onMouseover:w=>N(w,c.data),onMouseout:w=>S(w,c.data)},[h("div",{class:b(["cell-inner",c.data.showOverflowTooltip&&"tooltip"])},[D(e.$slots,"bodyCell",{index:d,row:t.data,prop:c.data.prop},()=>[O(W(t.data[c.data.prop]),1)],!0)],2)],46,K))),128))]))),128))])],4)],544),V(H,{"mouseenter-el":g.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])],2))}},X=j(Q,[["__scopeId","data-v-97df5dd2"]]),Y={key:0},Z=["onClick"],le={__name:"index",setup(C){const o=[],m=[],u=()=>{console.log("--详情--")},x=()=>{const a=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],l=Math.ceil(Math.random()*10);return a.slice(0,l).join("")};for(let a=1;a<=8;a++)o.push({prop:`column-${a}`,label:"title-"+a,showOverflowTooltip:!0});o.unshift({prop:"index",label:"序号",fixed:"left"}),o.push({prop:"opt",label:"操作",fixed:"right"});for(let a=1;a<=15;a++){let l={};o.forEach(i=>{l[i.prop]=x()}),m.push(l)}return(a,l)=>(r(),A(X,{data:m,columns:o},{bodyCell:F(({row:i,prop:_,index:f})=>[_==="index"?(r(),n("span",Y,W(f+1),1)):_==="opt"?(r(),n("span",{key:1,onClick:v=>u(i)},"详情",8,Z)):L("",!0)]),_:1}))}};export{le as default};
