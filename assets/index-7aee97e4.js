import{_ as W,r as C,o as I,c as Y,F as q,d as O,b as L,t as E,a as V,k as K,l as X,m as U,p as R,q as Z}from"./index-b52a4a79.js";const tt=["onMousedown","onTouchstart","onTouchmove","onTouchend"],v=50,k=10,ot={__name:"list-drag",setup(b){const u=C("text"),e=C([]);["a","b","c","d","e","f","g"].forEach((s,a)=>{e.value.push({id:`${Date.now()}-${a}`,index:a,top:10+(v+k)*a,transition:"",zIndex:0,constant:s})});const g=e.value.length,T=g*v+(g-1)*k+10*2;let y=0,p=0,S=0;function z(s,a){const c=a-y;let l=S+c;const H=0,t=T-v;l<H?l=H:l>t&&(l=t),s.top=l;const n=s.top+v/2;for(let o=0;o<e.value.length;o++)if(s.index!==e.value[o].index&&n>e.value[o].top&&n<e.value[o].top+v){s.index=e.value[o].index,e.value[o].index=p,e.value[o].top=p*(v+k)+10,e.value[o].transition="top 0.3s linear 0s",p=s.index;break}}const m=function(s,a){u.value="none",y=s.clientY,p=a.index,S=a.top,i(a),w(a)};function i(s){document.onmousemove=function(a){s.zIndex=99,s.transition="",z(s,a.clientY)}}function w(s){document.onmouseup=function(){s.top=p*(v+k)+10,s.zIndex=0,u.value="text",document.onmousemove=null}}function $(s,a){u.value="none",y=s.targetTouches[0].clientY,p=a.index,S=a.top}function F(s,a){a.zIndex=99,a.transition="";const c=s.targetTouches[0];z(a,c.clientY)}function N(s){s.top=p*(v+k)+10,s.zIndex=0,u.value="text"}return(s,a)=>(I(),Y("div",{class:"drag-list",style:L({height:T+"px",userSelect:u.value})},[(I(!0),Y(q,null,O(e.value,c=>(I(),Y("div",{key:c.id,class:"drag-list-item",style:L({height:v+"px",top:c.top+"px",transition:c.transition,"z-index":c.zIndex}),onMousedown:l=>m(l,c),onTouchstart:l=>$(l,c),onTouchmove:l=>F(l,c),onTouchend:l=>N(c)},E(c.constant)+" --- top: "+E(c.top.toFixed()),45,tt))),128))],4))}},et=W(ot,[["__scopeId","data-v-4923c303"]]);const nt=["onMousedown","onTouchstart","onTouchmove","onTouchend"],h=100,f=100,_=10,r=3,st={__name:"grid-drag",setup(b){const u=C("text"),e=C([]),M=["a","b","c","d","e","f","g"];let g=0,T=0;M.forEach((t,n)=>{g=10+(h+_)*(n%r),T=10+(f+_)*Math.floor(n/r),e.value.push({id:`${Date.now()}-${n}`,index:n,left:g,top:T,transition:"",zIndex:0,constant:t})});const y=e.value.length,p=r*h+(r-1)*_+20,S=Math.ceil(y/r)*f+(r-1)*_+20;let z=0,m=0,i=0,w=0,$=0;function F(t,n,o){const x=n-z,Q=o-m;let D=w+x,P=$+Q;const B=0,G=p-h,j=S-f;D<B?D=B:D>G&&(D=G),P<B?P=B:P>j&&(P=j),t.left=D,t.top=P;const A=t.left+h/2,J=t.top+f/2;for(let d=0;d<e.value.length;d++)if(t.index!==e.value[d].index&&A>e.value[d].left&&A<e.value[d].left+h&&J>e.value[d].top&&J<e.value[d].top+f){t.index=e.value[d].index,e.value[d].index=i,e.value[d].left=(h+_)*(i%r)+10,e.value[d].top=(f+_)*Math.floor(i/r)+10,e.value[d].transition="left 0.3s linear,top 0.3s linear",i=t.index;break}}const N=function(t,n){u.value="none",z=t.clientX,m=t.clientY,i=n.index,w=n.left,$=n.top,s(n),a(n)};function s(t){document.onmousemove=function(n){t.zIndex=99,t.transition="",F(t,n.clientX,n.clientY)}}function a(t){document.onmouseup=function(){t.left=(h+_)*(i%r)+10,t.top=(f+_)*Math.floor(i/r)+10,t.zIndex=0,u.value="text",document.onmousemove=null}}function c(t,n){u.value="none";const o=t.targetTouches[0];z=o.clientX,m=o.clientY,i=n.index,w=n.left,$=n.top}function l(t,n){n.zIndex=99,n.transition="";const o=t.targetTouches[0];F(n,o.clientX,o.clientY)}function H(t){t.left=(h+_)*(i%r)+10,t.top=(f+_)*Math.floor(i/r)+10,t.zIndex=0,u.value="text"}return(t,n)=>(I(),Y("div",{class:"drag-list",style:L({width:p+"px",height:S+"px",userSelect:u.value})},[(I(!0),Y(q,null,O(e.value,o=>(I(),Y("div",{key:o.id,class:"drag-list-item",style:L({width:h+"px",height:f+"px",top:o.top+"px",left:o.left+"px",transition:o.transition,"z-index":o.zIndex}),onMousedown:x=>N(x,o),onTouchstart:x=>c(x,o),onTouchmove:x=>l(x,o),onTouchend:x=>H(o)},[V("div",null,E(o.constant),1),V("div",null,"left: "+E(o.left.toFixed()),1),V("div",null,"top: "+E(o.top.toFixed()),1)],44,nt))),128))],4))}},at=W(st,[["__scopeId","data-v-100c5cee"]]);const ct=b=>(R("data-v-c86ba7b7"),b=b(),Z(),b),lt=ct(()=>V("div",{class:"title"},"元素拖拽",-1)),ut={__name:"index",setup(b){return(u,e)=>{const M=K("el-tab-pane"),g=K("el-tabs");return I(),Y(q,null,[lt,X(g,{modelValue:"1"},{default:U(()=>[X(M,{label:"列表",name:"1"},{default:U(()=>[X(et)]),_:1}),X(M,{label:"网格",name:"2",lazy:""},{default:U(()=>[X(at)]),_:1})]),_:1})],64)}}},dt=W(ut,[["__scopeId","data-v-c86ba7b7"]]);export{dt as default};
