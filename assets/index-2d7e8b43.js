import{D as V,_ as q,r as v,E as P,o as r,c as u,a as h,k as Q,n as C,G as O,F as M,m as D,y as k,z as I,e as A,t as S,j as H,b as y,A as X,h as G,d as w,g as F,p as Y,f as Z}from"./index-47cf10a8.js";import{_ as ee}from"./index-09e6028c.js";function te(p,t){let c=!1;const n=new ResizeObserver(()=>{c||(c=!0,requestAnimationFrame(()=>{c=!1}),t&&t())});n.observe(p),V(()=>{n.unobserve(p)})}const le={class:"table-header-wrapper"},oe={class:"table-row"},ae=["onMouseover","onMouseout"],se={key:0,class:"cover"},ne={class:"table-body-wrapper"},re=["onMouseover","onMouseout"],E=100,ie={__name:"index",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(p){const t=p,c=v([]),n=v([]);let _=0;const l=v(!1);c.value=t.data.map((e,o)=>({id:`row-${Date.now()}-${o}`,data:e})),n.value=t.columns.map((e,o)=>{let a="";(e.fixed==="left"||e.fixed==="right")&&(a=`${e.fixed}-fixed`);const s=e.minWidth||E;return _+=s,{id:`column-${Date.now()}-${o}`,minWidth:s,className:a,data:e}}),t.columns.some((e,o)=>{if(e.fixed==="left"&&t.columns[o+1].fixed!=="left")return n.value[o].className+=" last-left-fixed",!0}),n.value.some((e,o)=>{if(e.data.fixed==="right")return n.value[o].className+=" first-right-fixed",l.value=!0,!0});const i=v(null),f=v(null),d=v(null),b=v(!1),x=v(!1);let $=0;const g=v(""),L=v(null);let N=null;const R=()=>{let e=0,o=null,a=null;for(let s=0;s<t.columns.length;s++)t.columns[s].fixed==="left"?(o=e,e+=t.columns[s].minWidth||E):o=null,n.value[s].left=o;e=0;for(let s=t.columns.length-1;s>=0;s--)t.columns[s].fixed==="right"?(a=e,e+=t.columns[s].minWidth||E):a=null,n.value[s].right=a};R();const U=e=>{if($===0)return;const o=e.target.scrollLeft;f.value.scrollLeft=o;const a=Math.abs($-o);b.value&&(o===0?g.value="scrolling-left":o===$||a<=1?g.value="scrolling-right":g.value="scrolling-middle")},T=(e,o)=>{o.showOverflowTooltip&&(L.value=e.target)},j=()=>{L.value=null},B=e=>{N=e.target},W=e=>{f.value.contains(N)&&(e.keyCode===40||e.keyCode===38)&&e.preventDefault()},J=()=>{d.value.clientWidth<_?(b.value=!0,g.value="scrolling-left",$=_-d.value.clientWidth):(b.value=!1,g.value=""),d.value.scrollHeight>d.value.clientHeight?x.value=!0:x.value=!1,X(()=>{f.value.scrollLeft=d.value.scrollLeft,R()})};return P(()=>{te(i.value,J),document.addEventListener("click",B),document.addEventListener("keydown",W)}),V(()=>{document.removeEventListener("click",B),document.removeEventListener("keydown",W)}),(e,o)=>(r(),u("div",{ref_key:"tableRef",ref:i,class:k(["table",b.value&&"horizontal-scroll",x.value&&"vertical-scroll",g.value])},[h("div",le,[h("div",{ref_key:"tableHeaderRef",ref:f,class:"table-header",onWheel:o[0]||(o[0]=Q(()=>{},["prevent"])),onKeydown:W},[h("div",{class:"table-header-content",style:C({height:x.value?"50px":"","min-width":O(_)+"px"})},[h("div",oe,[(r(!0),u(M,null,D(n.value,a=>(r(),u("div",{key:a.id,class:k(["table-cell",a.className]),style:C({left:a.left+"px",right:a.right+"px"}),onMouseover:s=>T(s,a.data),onMouseout:s=>j(s,a.data)},[h("div",{class:k(["cell-inner",a.data.showOverflowTooltip&&"tooltip"])},[I(e.$slots,"headerCell",{prop:a.data.prop},()=>[A(S(a.data.label),1)],!0)],2)],46,ae))),128))])],4)],544),l.value?(r(),u("div",se)):H("",!0)]),h("div",ne,[h("div",{ref_key:"tableBodyRef",ref:d,class:"table-body",style:{"max-height":"460px"},onScroll:U},[h("div",{class:"table-body-content",style:C({"min-width":O(_)+"px"})},[(r(!0),u(M,null,D(c.value,(a,s)=>(r(),u("div",{key:a.id,class:"table-row"},[(r(!0),u(M,null,D(n.value,m=>(r(),u("div",{key:m.id,class:k(["table-cell",m.className]),style:C({left:m.left+"px",right:m.right+"px"}),onMouseover:z=>T(z,m.data),onMouseout:z=>j(z,m.data)},[h("div",{class:k(["cell-inner",m.data.showOverflowTooltip&&"tooltip"])},[I(e.$slots,"bodyCell",{index:s,row:a.data,prop:m.data.prop},()=>[A(S(a.data[m.data.prop]),1)],!0)],2)],46,re))),128))]))),128))],4)],544)]),y(ee,{"mouseenter-el":L.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])],2))}},K=q(ie,[["__scopeId","data-v-ff183e06"]]),de={key:0},ce=["onClick"],ue={__name:"index",setup(p){const t=[],c=[],n=()=>{console.log("--详情--")},_=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],i=Math.ceil(Math.random()*10);return l.slice(0,i).join("")};for(let l=1;l<=5;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.push({prop:"opt",label:"操作"});for(let l=1;l<=15;l++){let i={};t.forEach(f=>{i[f.prop]=_()}),c.push(i)}return(l,i)=>(r(),G(K,{data:c,columns:t},{bodyCell:w(({row:f,prop:d,index:b})=>[d==="index"?(r(),u("span",de,S(b+1),1)):d==="opt"?(r(),u("span",{key:1,onClick:x=>n(f)},"详情",8,ce)):H("",!0)]),_:1}))}},fe={key:0},pe=["onClick"],_e={__name:"index2",setup(p){const t=[],c=[],n=()=>{console.log("--详情--")},_=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],i=Math.ceil(Math.random()*10);return l.slice(0,i).join("")};for(let l=1;l<=5;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.unshift({prop:"index2",label:"序号2",fixed:"left"}),t.unshift({prop:"index",label:"序号",fixed:"left"}),t.push({prop:"opt",label:"操作",fixed:"right"}),t.push({prop:"opt2",label:"操作2",fixed:"right"});for(let l=1;l<=15;l++){let i={};t.forEach(f=>{i[f.prop]=_()}),c.push(i)}return(l,i)=>(r(),G(K,{data:c,columns:t},{bodyCell:w(({row:f,prop:d,index:b})=>[d==="index"||d==="index2"?(r(),u("span",fe,S(b+1),1)):d==="opt"||d==="opt2"?(r(),u("span",{key:1,onClick:x=>n(f)},"详情",8,pe)):H("",!0)]),_:1}))}};const ve=p=>(Y("data-v-f342f3ea"),p=p(),Z(),p),he=ve(()=>h("div",{class:"title"},"表格",-1)),me={__name:"index",setup(p){return(t,c)=>{const n=F("el-tab-pane"),_=F("el-tabs");return r(),u(M,null,[he,y(_,{"model-value":"1"},{default:w(()=>[y(n,{label:"表格 1",name:"1"},{default:w(()=>[y(ue)]),_:1}),y(n,{label:"表格 2（固定列）",name:"2",lazy:""},{default:w(()=>[y(_e)]),_:1})]),_:1})],64)}}},ge=q(me,[["__scopeId","data-v-f342f3ea"]]);export{ge as default};
