import{_ as C,i as R,r as k,g as h,o as m,c as g,a as b,b as i,d as x,h as $,j as V,k as I,t as B,n as w,w as H,l as U,F as D,m as N,q as z,s as j,e as L,u as A,x as E,p as F,f as W}from"./index-47cf10a8.js";import{V as q}from"./index-2cfd2abc.js";import"./index-09e6028c.js";const K={class:"tree-node"},O={key:0,class:"tree-node-children"},P={__name:"tree-node",props:{node:{type:Object,default:()=>({})}},setup(l){const c=l,u=R("check"),r=k(c.node.expanded),d=()=>{r.value=!r.value},v=(_,s)=>{u(s,_.target.checked)};return(_,s)=>{const o=h("CaretBottom"),t=h("CaretRight"),a=h("el-icon"),n=h("TreeNode",!0);return m(),g("div",K,[b("div",{class:"tree-node-content",style:w({"padding-left":l.node.level*18+"px"}),onClick:d},[i(a,{class:"tree-node-expand-icon"},{default:x(()=>[l.node.data.children&&r.value?(m(),$(o,{key:0})):l.node.data.children?(m(),$(t,{key:1})):V("",!0)]),_:1}),b("input",{type:"checkbox",class:"checkbox",onClick:s[0]||(s[0]=I(()=>{},["stop"])),onInput:s[1]||(s[1]=e=>v(e,l.node.data))},null,32),b("span",null,B(l.node.data.label),1)],4),l.node.data.children?H((m(),g("div",O,[(m(!0),g(D,null,N(l.node.data.children,e=>(m(),$(n,{key:e.id,node:e},null,8,["node"]))),128))],512)),[[U,r.value]]):V("",!0)])}}},G=C(P,[["__scopeId","data-v-0302d19d"]]);const J={class:"tree"},Q={class:"tree-content"},X={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0}},setup(l){const c=l,u=[];z("check",(_,s)=>{s?u.push(_.id):u.some((o,t)=>{if(o===_.id)return u.splice(t,1),!0})});const d=k(v(c.data,0));function v(_,s){return _.map((o,t)=>{const a={id:`${Date.now()}-${t}`,level:s,expanded:!1,checked:!1,data:{}};return o.children?a.data={...o,children:v(o.children,s+1)}:a.data=o,a})}return j(()=>c.data,_=>{d.value=v(_,0)}),(_,s)=>(m(),g("div",J,[b("div",{class:"tree-inner",style:w({"max-height":l.maxHeight+"px"})},[b("div",Q,[(m(!0),g(D,null,N(d.value,o=>(m(),$(G,{key:o.id,node:o},null,8,["node"]))),128))])],4)]))}},Y=C(X,[["__scopeId","data-v-8b494554"]]);const Z={class:"wrap"},ee=400,te={__name:"tree",setup(l){const c=k([]);let u=[5,4,3,3],r=0;d();function d(){u=s(),r=0,c.value=v(0,u[0])}function v(o,t){if(!t)return;const a=[];let n={};for(let e=0;e<t;e++)r++,n={id:`${Date.now()}-${e}`,label:`${r} --- ${_()}`,children:v(o+1,u[o+1])},a.push(n);return a}function _(){const o=["a","b","c","d","e","f","g","h","i","j","k"],t=Math.ceil(Math.random()*10);return o.slice(0,t).join("")}function s(){const o=[],t=Math.ceil(Math.random()*4);for(let a=0;a<t;a++)o.push(Math.ceil(Math.random()*10));return o}return(o,t)=>{const a=h("el-button"),n=h("el-form-item"),e=h("el-form");return m(),g("div",null,[i(e,{inline:""},{default:x(()=>[i(n,null,{default:x(()=>[i(a,{type:"primary",onClick:d},{default:x(()=>[L("更新数据")]),_:1})]),_:1})]),_:1}),b("div",Z,[i(Y,{data:c.value,"max-height":ee},null,8,["data"])])])}}},ne=C(te,[["__scopeId","data-v-4a837749"]]);const ae={class:"tree"},oe=["onClick"],le=["onUpdate:modelValue"],ce={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},cache:{type:Number,default:2},buffer:{type:Number,default:1}},setup(l){const c=l;let u=-1,r=[];const d=k([]),v=()=>r.filter(t=>t.level===0),_=t=>{let a={};for(const n in t)n!=="children"&&(a[n]=t[n]);return a},s=(t,a)=>{let n=[];return t.forEach(e=>{u++,n.push({id:`${Date.now()}-${u}`,index:u,level:a,leaf:!(e.children&&e.children.length>0),expanded:!1,checked:!1,data:_(e)}),e.children&&e.children.length>0&&(n=n.concat(s(e.children,a+1)))}),n};j(()=>c.data,t=>{u=-1,r=s(t,0),d.value=v()},{immediate:!0,deep:!0});const o=t=>{if(!t.leaf)if(t.expanded){t.expanded=!1;let a=d.value.findIndex(n=>n.id===t.id);for(let n=a+1;n<d.value.length&&d.value[n].level>t.level;n++)d.value.splice(n,1),n--}else{t.expanded=!0;const a=[];for(let n=t.index+1;n<r.length&&r[n].level>t.level;n++)r[n].level===t.level+1&&a.push(r[n]);d.value.some((n,e)=>{if(n.id===t.id)return d.value.splice(e+1,0,...a),!0})}};return(t,a)=>{const n=h("CaretBottom"),e=h("CaretRight"),f=h("el-icon");return m(),g("div",ae,[i(q,{data:d.value,"max-height":l.maxHeight,buffer:l.buffer,cache:l.cache},{default:x(({item:p})=>[b("div",{class:"tree-node-content",style:w({"padding-left":p.level*18+"px"}),onClick:y=>o(p)},[i(f,{class:"tree-node-expand-icon"},{default:x(()=>[!p.leaf&&p.expanded?(m(),$(n,{key:0})):p.leaf?V("",!0):(m(),$(e,{key:1}))]),_:2},1024),H(b("input",{"onUpdate:modelValue":y=>p.checked=y,type:"checkbox",class:"checkbox",onClick:a[0]||(a[0]=I(()=>{},["stop"]))},null,8,le),[[A,p.checked]]),b("span",null,B(p.data.label),1)],12,oe)]),_:1},8,["data","max-height","buffer","cache"])])}}},re=C(ce,[["__scopeId","data-v-a835d568"]]);const de={class:"wrap"},se=400,ie={__name:"virtual-tree",setup(l){const c=E({buffer:0,cache:2}),u=k([]),r=k(0),d=k(2);let v=[5,4,3,3],_=0;s();function s(){v=a(),_=0,u.value=o(0,v[0]),r.value=c.buffer,d.value=c.cache}function o(e,f){if(!f)return;const p=[];let y={};for(let T=0;T<f;T++)_++,y={label:`${_} --- ${t()}`,children:o(e+1,v[e+1])},p.push(y);return p}function t(){const e=["a","b","c","d","e","f","g","h","i","j","k"],f=Math.ceil(Math.random()*10);return e.slice(0,f).join("")}function a(){const e=[],f=Math.ceil(Math.random()*4);for(let p=0;p<f;p++)e.push(Math.ceil(Math.random()*10));return e}function n(e){c[e]!==""&&typeof c[e]=="string"&&(c[e]=c[e].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),c[e]=Number(c[e]))}return(e,f)=>{const p=h("el-input"),y=h("el-form-item"),T=h("el-button"),S=h("el-form");return m(),g("div",null,[i(S,{inline:""},{default:x(()=>[i(y,{label:"缓冲量"},{default:x(()=>[i(p,{modelValue:c.buffer,"onUpdate:modelValue":f[0]||(f[0]=M=>c.buffer=M),modelModifiers:{number:!0},placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:f[1]||(f[1]=M=>n("buffer"))},null,8,["modelValue"])]),_:1}),i(y,{label:"预先多加载的列表数量"},{default:x(()=>[i(p,{modelValue:c.cache,"onUpdate:modelValue":f[2]||(f[2]=M=>c.cache=M),modelModifiers:{number:!0},placeholder:"请输入预先多加载的列表数量",maxlength:"5",onBlur:f[3]||(f[3]=M=>n("cache"))},null,8,["modelValue"])]),_:1}),i(y,null,{default:x(()=>[i(T,{type:"primary",onClick:s},{default:x(()=>[L("更新数据")]),_:1})]),_:1})]),_:1}),b("div",de,[i(re,{data:u.value,"max-height":se,buffer:r.value,cache:d.value},null,8,["data","buffer","cache"])])])}}},ue=C(ie,[["__scopeId","data-v-97cf1200"]]);const _e=l=>(F("data-v-60abe013"),l=l(),W(),l),fe=_e(()=>b("div",{class:"title"},"Tree 树形控件",-1)),pe={__name:"index",setup(l){return(c,u)=>{const r=h("el-tab-pane"),d=h("el-tabs");return m(),g(D,null,[fe,i(d,{"model-value":"1"},{default:x(()=>[i(r,{label:"树形控件",name:"1"},{default:x(()=>[i(ne)]),_:1}),i(r,{label:"虚拟树形控件",name:"2",lazy:""},{default:x(()=>[i(ue)]),_:1})]),_:1})],64)}}},xe=C(pe,[["__scopeId","data-v-60abe013"]]);export{xe as default};
