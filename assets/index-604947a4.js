import{r as u,B as y,I as w,l as a,_ as W,h as k,g as N,F as R,o as $}from"./index-2e8c6b53.js";const z={props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(c){const r=u([]),n=u([]);let v=0;const l=100;r.value=c.data.map((e,t)=>({id:`row-${Date.now()}-${t}`,data:e})),n.value=c.columns.map((e,t)=>{const s=e.minWidth||l;v+=s;let x="";return(e.fixed==="left"||e.fixed==="right")&&(x=`fixed-${e.fixed}`),{id:`column-${Date.now()}-${t}`,minWidth:s,className:x,data:e}}),c.columns.some((e,t)=>{if(e.fixed==="left"&&c.columns[t+1].fixed!=="left")return n.value[t].className+=" last-fixed-left",!0});const d=c.columns.findIndex(e=>e.fixed==="right");d>=0&&(n.value[d].className+=" first-fixed-right");const i=u(null),h=u(!1),m=u(!1);let f=0;const o=u(""),_=()=>{i.value.scrollWidth>i.value.clientWidth?h.value=!0:h.value=!1,i.value.scrollHeight>i.value.clientHeight?m.value=!0:m.value=!1,f=i.value.scrollWidth-i.value.clientWidth,h.value&&f>0?o.value="scrolling-left":o.value=""},g=e=>{if(f===0)return;const t=e.target.scrollLeft,s=Math.abs(f-t);t===0?o.value="scrolling-left":t===f||s<=1?o.value="scrolling-right":o.value="scrolling-middle"};let p=!1;const b=new ResizeObserver(()=>{p||(p=!0,requestAnimationFrame(()=>{p=!1}),_())});return y(()=>{b.observe(i.value)}),w(()=>{b.unobserve(i.value)}),()=>a("div",{class:["table",h.value&&"horizontal-scroll",m.value&&"vertical-scroll",o.value]},[a("div",{ref:i,class:"table-inner",onScroll:g},[a("div",{class:"table-content",style:{"min-width":v+"px"}},[a("div",{class:"table-header"},[a("div",{class:"table-row"},[n.value.map(e=>a("div",{key:e.id,class:["table-cell",e.className],style:{"min-width":e.minWidth+"px"}},[a("div",{class:"cell-inner"},[e.data.label])]))])]),a("div",{class:"table-body"},[r.value.map((e,t)=>a("div",{key:e.id,class:"table-row"},[n.value.map(s=>a("div",{key:s.id,class:["table-cell",s.className],style:{"min-width":s.minWidth+"px"}},[a("div",{class:"cell-inner"},[s.data.cellRender?s.data.cellRender({index:t,row:e.data,column:s.data}):e.data[s.data.prop]])]))]))])])])])}};const F=W(z,[["__scopeId","data-v-2e29126d"]]),B={__name:"index",setup(c){const r=[],n=[],v=()=>{console.log("--编辑--")};for(let l=1;l<=8;l++)r.push({prop:`column-${l}`,label:"title-"+l});r.unshift({label:"序号",fixed:"left",cellRender:({index:l})=>a(R,null,[l+1])}),r.push({label:"操作",fixed:"right",cellRender:()=>a("span",{onClick:v},[N("编辑")])});for(let l=1;l<=15;l++){let d={};r.forEach(i=>{d[i.prop]=l}),n.push(d)}return(l,d)=>($(),k(F,{data:n,columns:r}))}};export{B as default};
