import{_ as V,r as p,C as P,D as U,o as i,c,a as _,k as J,n as $,G as I,F as C,m as D,x as k,y as O,e as F,t as M,j as H,b as y,z as Q,h as A,d as w,p as X,f as Y}from"./index-e097e5a4.js";import{E as Z,a as ee}from"./el-tab-pane-a29800ca.js";import{_ as te}from"./index-884084ef.js";import{u as le}from"./resizeObserver-ad35e5d3.js";import"./strings-429a1450.js";const ae={class:"table-header-wrapper"},oe={class:"table-row"},se=["onMouseover","onMouseout"],ne={key:0,class:"cover"},re={class:"table-body-wrapper"},ie=["onMouseover","onMouseout"],T=100,de={__name:"index",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(m){const t=m,h=p([]),n=p([]);let f=0;const l=p(!1);h.value=t.data.map((e,o)=>({id:`row-${Date.now()}-${o}`,data:e})),n.value=t.columns.map((e,o)=>{let a="";(e.fixed==="left"||e.fixed==="right")&&(a=`${e.fixed}-fixed`);const s=e.minWidth||T;return f+=s,{id:`column-${Date.now()}-${o}`,minWidth:s,className:a,data:e}}),t.columns.some((e,o)=>{if(e.fixed==="left"&&t.columns[o+1].fixed!=="left")return n.value[o].className+=" last-left-fixed",!0}),n.value.some((e,o)=>{if(e.data.fixed==="right")return n.value[o].className+=" first-right-fixed",l.value=!0,!0});const d=p(null),u=p(null),r=p(null),b=p(!1),x=p(!1),g=p(""),E=p(null);let N=null;const j=()=>{let e=0,o=null,a=null;for(let s=0;s<t.columns.length;s++)t.columns[s].fixed==="left"?(o=e,e+=t.columns[s].minWidth||T):o=null,n.value[s].left=o;e=0;for(let s=t.columns.length-1;s>=0;s--)t.columns[s].fixed==="right"?(a=e,e+=t.columns[s].minWidth||T):a=null,n.value[s].right=a};j();let L=!1;const G=e=>{if(!b.value||L)return;L=!0,requestAnimationFrame(()=>{L=!1});const o=e.target.scrollLeft;u.value.scrollLeft=o;const a=r.value.scrollWidth-r.value.clientWidth-1;o>=a?g.value="scrolling-right":o===0?g.value="scrolling-left":g.value="scrolling-middle"},z=(e,o)=>{o.showOverflowTooltip&&(E.value=e.target)},B=()=>{E.value=null},R=e=>{N=e.target},W=e=>{u.value.contains(N)&&(e.keyCode===40||e.keyCode===38)&&e.preventDefault()},K=()=>{r.value.clientWidth<f?(b.value=!0,g.value="scrolling-left"):(b.value=!1,g.value=""),r.value.scrollHeight>r.value.clientHeight?x.value=!0:x.value=!1,Q(()=>{u.value.scrollLeft=r.value.scrollLeft,j()})};return P(()=>{le(d.value,K),document.addEventListener("click",R),document.addEventListener("keydown",W)}),U(()=>{document.removeEventListener("click",R),document.removeEventListener("keydown",W)}),(e,o)=>(i(),c("div",{ref_key:"tableRef",ref:d,class:k(["table",b.value&&"horizontal-scroll",x.value&&"vertical-scroll",g.value])},[_("div",ae,[_("div",{ref_key:"tableHeaderRef",ref:u,class:"table-header",onWheel:o[0]||(o[0]=J(()=>{},["prevent"])),onKeydown:W},[_("div",{class:"table-header-content",style:$({height:x.value?"50px":"","min-width":I(f)+"px"})},[_("div",oe,[(i(!0),c(C,null,D(n.value,a=>(i(),c("div",{key:a.id,class:k(["table-cell",a.className]),style:$({left:a.left+"px",right:a.right+"px"}),onMouseover:s=>z(s,a.data),onMouseout:s=>B(s,a.data)},[_("div",{class:k(["cell-inner",a.data.showOverflowTooltip&&"tooltip"])},[O(e.$slots,"headerCell",{prop:a.data.prop},()=>[F(M(a.data.label),1)],!0)],2)],46,se))),128))])],4)],544),l.value?(i(),c("div",ne)):H("",!0)]),_("div",re,[_("div",{ref_key:"tableBodyRef",ref:r,class:"table-body",style:{"max-height":"460px"},onScroll:G},[_("div",{class:"table-body-content",style:$({"min-width":I(f)+"px"})},[(i(!0),c(C,null,D(h.value,(a,s)=>(i(),c("div",{key:a.id,class:"table-row"},[(i(!0),c(C,null,D(n.value,v=>(i(),c("div",{key:v.id,class:k(["table-cell",v.className]),style:$({left:v.left+"px",right:v.right+"px"}),onMouseover:S=>z(S,v.data),onMouseout:S=>B(S,v.data)},[_("div",{class:k(["cell-inner",v.data.showOverflowTooltip&&"tooltip"])},[O(e.$slots,"bodyCell",{index:s,row:a.data,prop:v.data.prop},()=>[F(M(a.data[v.data.prop]),1)],!0)],2)],46,ie))),128))]))),128))],4)],544)]),y(te,{"mouseenter-el":E.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])],2))}},q=V(de,[["__scopeId","data-v-ae5dff85"]]),ce={key:0},ue=["onClick"],fe={__name:"index",setup(m){const t=[],h=[],n=()=>{console.log("--详情--")},f=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],d=Math.ceil(Math.random()*10);return l.slice(0,d).join("")};for(let l=1;l<=5;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.push({prop:"opt",label:"操作"});for(let l=1;l<=15;l++){let d={};t.forEach(u=>{d[u.prop]=f()}),h.push(d)}return(l,d)=>(i(),A(q,{data:h,columns:t},{bodyCell:w(({row:u,prop:r,index:b})=>[r==="index"?(i(),c("span",ce,M(b+1),1)):r==="opt"?(i(),c("span",{key:1,onClick:x=>n(u)},"详情",8,ue)):H("",!0)]),_:1}))}},pe={key:0},_e=["onClick"],he={__name:"index2",setup(m){const t=[],h=[],n=()=>{console.log("--详情--")},f=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],d=Math.ceil(Math.random()*10);return l.slice(0,d).join("")};for(let l=1;l<=5;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.unshift({prop:"index2",label:"序号2",fixed:"left"}),t.unshift({prop:"index",label:"序号",fixed:"left"}),t.push({prop:"opt",label:"操作",fixed:"right"}),t.push({prop:"opt2",label:"操作2",fixed:"right"});for(let l=1;l<=15;l++){let d={};t.forEach(u=>{d[u.prop]=f()}),h.push(d)}return(l,d)=>(i(),A(q,{data:h,columns:t},{bodyCell:w(({row:u,prop:r,index:b})=>[r==="index"||r==="index2"?(i(),c("span",pe,M(b+1),1)):r==="opt"||r==="opt2"?(i(),c("span",{key:1,onClick:x=>n(u)},"详情",8,_e)):H("",!0)]),_:1}))}};const ve=m=>(X("data-v-f342f3ea"),m=m(),Y(),m),me=ve(()=>_("div",{class:"title"},"表格",-1)),be={__name:"index",setup(m){return(t,h)=>{const n=ee,f=Z;return i(),c(C,null,[me,y(f,{"model-value":"1"},{default:w(()=>[y(n,{label:"表格 1",name:"1"},{default:w(()=>[y(fe)]),_:1}),y(n,{label:"表格 2（固定列）",name:"2",lazy:""},{default:w(()=>[y(he)]),_:1})]),_:1})],64)}}},$e=V(be,[["__scopeId","data-v-f342f3ea"]]);export{$e as default};
