import{L as oe,M as F,y as L,r as f,q as z,i as Y,C as U,G as g,D as pe,N as G,O as te,P as T,Q as P,R as ce,S as fe,U as A,V as me,W as ve,o as h,h as W,d as c,c as w,x as re,t as q,j as le,e as H,X as _e,Y as se,Z as ye,$ as be,_ as x,a0 as ge,b as u,a as J,E as he,F as Q,m as Ee,w as Ce,z as Re,a1 as ke,p as we,f as Ve}from"./index-e0055230.js";import{E as $e,a as Ie}from"./el-tab-pane-94922b2b.js";import{v as Se}from"./el-loading-d22a39c8.js";import{E as Te,a as ie}from"./el-table-22f17ef4.js";import"./el-scrollbar-6f8e3f88.js";import{E as Be}from"./el-row-4697c6b9.js";/* empty css                */import{E as ue}from"./el-input-53ab1271.js";import{E as xe}from"./el-date-picker-e3829e9f.js";import{E as Ne,a as Oe}from"./el-select-5e76e756.js";import{E as Pe}from"./el-message-box-89d50f6b.js";import"./strings-9aa24faa.js";const Le=F({inheritAttrs:!1});function Ue(e,d,s,o,n,a){return L(e.$slots,"default")}var Me=oe(Le,[["render",Ue],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const De=F({name:"ElCollectionItem",inheritAttrs:!1});function Ae(e,d,s,o,n,a){return L(e.$slots,"default")}var ze=oe(De,[["render",Ae],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const qe="data-el-collection-item",Ke=e=>{const d=`El${e}Collection`,s=`${d}Item`,o=Symbol(d),n=Symbol(s),a={...Me,name:d,setup(){const m=f(null),p=new Map;z(o,{itemMap:p,getItems:()=>{const _=g(m);if(!_)return[];const y=Array.from(_.querySelectorAll(`[${qe}]`));return[...p.values()].sort(($,I)=>y.indexOf($.ref)-y.indexOf(I.ref))},collectionRef:m})}},t={...ze,name:s,setup(m,{attrs:p}){const v=f(null),_=Y(o,void 0);z(n,{collectionItemRef:v}),U(()=>{const y=g(v);y&&_.itemMap.set(y,{ref:y,...p})}),pe(()=>{const y=g(v);_.itemMap.delete(y)})}};return{COLLECTION_INJECTION_KEY:o,COLLECTION_ITEM_INJECTION_KEY:n,ElCollection:a,ElCollectionItem:t}},Z=G({trigger:te.trigger,effect:{...T.effect,default:"light"},type:{type:P(String)},placement:{type:P(String),default:"bottom"},popperOptions:{type:P(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:P([Number,String]),default:0},maxHeight:{type:P([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:P(Object)},teleported:T.teleported});G({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ce}});G({onKeydown:{type:P(Function)}});Ke("Dropdown");const je=G({trigger:te.trigger,placement:Z.placement,disabled:te.disabled,visible:T.visible,transition:T.transition,popperOptions:Z.popperOptions,tabindex:Z.tabindex,content:T.content,popperStyle:T.popperStyle,popperClass:T.popperClass,enterable:{...T.enterable,default:!0},effect:{...T.effect,default:"light"},teleported:T.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),He={"update:visible":e=>fe(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Ye="onUpdate:visible",We=F({name:"ElPopover"}),Fe=F({...We,props:je,emits:He,setup(e,{expose:d,emit:s}){const o=e,n=A(()=>o[Ye]),a=me("popover"),t=f(),m=A(()=>{var r;return(r=g(t))==null?void 0:r.popperRef}),p=A(()=>[{width:ve(o.width)},o.popperStyle]),v=A(()=>[a.b(),o.popperClass,{[a.m("plain")]:!!o.content}]),_=A(()=>o.transition===`${a.namespace.value}-fade-in-linear`),y=()=>{var r;(r=t.value)==null||r.hide()},V=()=>{s("before-enter")},$=()=>{s("before-leave")},I=()=>{s("after-enter")},N=()=>{s("update:visible",!1),s("after-leave")};return d({popperRef:m,hide:y}),(r,K)=>(h(),W(g(se),_e({ref_key:"tooltipRef",ref:t},r.$attrs,{trigger:r.trigger,placement:r.placement,disabled:r.disabled,visible:r.visible,transition:r.transition,"popper-options":r.popperOptions,tabindex:r.tabindex,content:r.content,offset:r.offset,"show-after":r.showAfter,"hide-after":r.hideAfter,"auto-close":r.autoClose,"show-arrow":r.showArrow,"aria-label":r.title,effect:r.effect,enterable:r.enterable,"popper-class":g(v),"popper-style":g(p),teleported:r.teleported,persistent:r.persistent,"gpu-acceleration":g(_),"onUpdate:visible":g(n),onBeforeShow:V,onBeforeHide:$,onShow:I,onHide:N}),{content:c(()=>[r.title?(h(),w("div",{key:0,class:re(g(a).e("title")),role:"title"},q(r.title),3)):le("v-if",!0),L(r.$slots,"default",{},()=>[H(q(r.content),1)])]),default:c(()=>[r.$slots.reference?L(r.$slots,"reference",{key:0}):le("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Ge=oe(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const ne=(e,d)=>{const s=d.arg||d.value,o=s==null?void 0:s.popperRef;o&&(o.triggerRef=e)};var Je={mounted(e,d){ne(e,d)},updated(e,d){ne(e,d)}};const Qe="popover",Xe=ye(Je,Qe),Ze=be(Ge,{directive:Xe});const et={__name:"table",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},editRowKey:{type:String,default:""},editCloseBefore:{type:Function,default:void 0},checkResult:{type:Array,default:()=>[]}},emits:["edit-open","edit-close"],setup(e,{expose:d,emit:s}){const o=e,n=f(""),a=f("");let t=null;const m=E=>{t=E};z("edit-cell",{editRowId:n,editProp:a,editRowKey:o.editRowKey}),z("updateEditCellEl",m),z("check-result",o.checkResult);const p=f(null),v=f(!1),_=f(null),y=f("");let V=null;const $=()=>{!n.value||!a.value||(s("edit-close",V,a.value),n.value="",a.value="",t=null)},I=(E,B,M,R)=>{const S=B.property;t!=null&&t.contains(R.target)||($(),v.value=!1,V=E,n.value=E[o.editRowKey],a.value=S,s("edit-open",E,S))},N=E=>{!n.value||!a.value||t!=null&&t.contains(E.target)||o.editCloseBefore(E)!==!1&&$()},r=(E,B,M)=>{const R=M.querySelector(".tooltip");if(!R)return;const S=document.createRange();S.setStart(R,0),S.setEnd(R,R.childNodes.length);const X=S.getBoundingClientRect().width,i=window.getComputedStyle(R),l=parseInt(i.getPropertyValue("padding-left"))+parseInt(i.getPropertyValue("padding-right")),b=R.getBoundingClientRect().width;X+l-b>.02&&(_.value=R,v.value=!0,y.value=R.innerText)},K=(E,B)=>{V=E,n.value=E[o.editRowKey],a.value=B};return U(()=>{document.addEventListener("mouseup",N)}),ge(()=>{document.removeEventListener("mouseup",N)}),d({ref:p,openEditCell:K}),(E,B)=>{const M=Te,R=se;return h(),w("div",null,[u(M,{ref_key:"tableRef",ref:p,data:e.data,border:"",stripe:"","max-height":e.maxHeight,onCellClick:I,onCellMouseEnter:r},{default:c(()=>[L(E.$slots,"default",{},void 0,!0)]),_:3},8,["data","max-height"]),u(R,{visible:v.value,"onUpdate:visible":B[0]||(B[0]=S=>v.value=S),"virtual-ref":_.value,"virtual-triggering":"",content:y.value,placement:"top",teleported:!1},null,8,["visible","virtual-ref","content"])])}}},tt=x(et,[["__scopeId","data-v-68625e30"]]),lt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ot=J("path",{fill:"currentColor",d:"m199.04 672.64l193.984 112l224-387.968l-193.92-112l-224 388.032zm-23.872 60.16l32.896 148.288l144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112l56.704-98.112l-193.984-112l-56.64 98.112zM104.32 708.8l384-665.024l304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z"},null,-1),nt=[ot];function at(e,d){return h(),w("svg",lt,nt)}const rt={name:"ep-edit-pen",render:at};const st={__name:"table-edit-cell",setup(e){const d=Y("updateEditCellEl"),s=f(null);return U(()=>{d(s.value)}),(o,n)=>(h(),w("div",{ref_key:"editCellRef",ref:s,class:"editor"},[L(o.$slots,"default",{},void 0,!0)],512))}},it=x(st,[["__scopeId","data-v-72e605d0"]]);const ut={key:0,class:"required"},dt={class:"label"},pt={__name:"table-column",props:{prop:{type:String,default:""},label:{type:String,default:""},minWidth:{type:Number,default:void 0},required:{type:Boolean,default:!1}},setup(e){const{editRowId:d,editProp:s,editRowKey:o}=Y("edit-cell"),n=Y("check-result");function a(t,m){const p=n.find(v=>v[o]===t);if(p)return p[m]}return(t,m)=>{const p=rt,v=he,_=ie;return h(),W(_,{prop:e.prop,"min-width":e.minWidth,"class-name":"editor-column"},{header:c(()=>[e.required?(h(),w("i",ut,"*")):le("",!0),J("span",dt,q(e.label),1),u(v,null,{default:c(()=>[u(p)]),_:1})]),default:c(({row:y})=>[g(d)===y[g(o)]&&g(s)===e.prop?(h(),W(it,{key:0},{default:c(()=>[L(t.$slots,"default",{},void 0,!0)]),_:3})):(h(),w("div",{key:1,class:re(["no-editor","tooltip",a(y[g(o)],e.prop)])},q(y[e.prop]),3))]),_:3},8,["prop","min-width"])}}},O=x(pt,[["__scopeId","data-v-85b2b37a"]]);const ct={__name:"cell-input",props:{modelValue:{type:String,default:""},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(e,{emit:d}){const s=e,o=f(null);function n(){o.value.focus()}function a(){const t=s.modelValue.trim();d("update:model-value",t)}return U(()=>{s.autofocus&&n()}),(t,m)=>{const p=ue;return h(),w("div",null,[u(p,{ref_key:"inputRef",ref:o,"model-value":e.modelValue,placeholder:"请输入","onUpdate:modelValue":m[0]||(m[0]=v=>t.$emit("update:model-value",v)),onBlur:a},null,8,["model-value"])])}}},ee=x(ct,[["__scopeId","data-v-abc8bb0b"]]);const ft={__name:"cell-date",props:{modelValue:{type:String,default:""},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(e,{expose:d}){const s=e,o=f(null),n=f(null),a=`date-prper-${Date.now()}`;function t(){o.value.focus()}return U(()=>{s.autofocus&&t(),n.value=document.querySelector(`.${a}`)}),d({popoverEl:n}),(m,p)=>{const v=xe;return h(),w("div",null,[u(v,{ref_key:"dateRef",ref:o,"model-value":e.modelValue,type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期","popper-class":a,"onUpdate:modelValue":p[0]||(p[0]=_=>m.$emit("update:model-value",_))},null,8,["model-value"])])}}},mt=x(ft,[["__scopeId","data-v-5a5a0484"]]);const vt={__name:"cell-select",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(e,{expose:d}){const s=e,o=f(null),n=f(null);function a(){o.value.toggleMenu()}return U(()=>{s.autofocus&&a(),n.value=o.value.popperPaneRef}),d({popoverEl:n}),(t,m)=>{const p=Ne,v=Oe;return h(),w("div",null,[u(v,{ref_key:"selectRef",ref:o,"model-value":e.modelValue,placeholder:"请选择",clearable:"",filterable:"","onUpdate:modelValue":m[0]||(m[0]=_=>t.$emit("update:model-value",_))},{default:c(()=>[(h(!0),w(Q,null,Ee(e.options,_=>(h(),W(p,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:1},8,["model-value"])])}}},ae=x(vt,[["__scopeId","data-v-813626ed"]]);const _t={__name:"textarea-popover",props:{modelValue:{type:String,default:""},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(e,{expose:d,emit:s}){const o=e,n=f(null),a=f(null),t=f(null),m=f(null),p=o.modelValue;function v(){t.value.focus()}function _(){const y=o.modelValue.trim();s("update:model-value",y)}return U(()=>{o.autofocus&&v(),m.value=a.value.popperRef.contentRef}),d({popoverEl:m}),(y,V)=>{const $=ue,I=Ze;return h(),w(Q,null,[J("div",{ref_key:"virtualRef",ref:n,class:"trigger"},q(g(p)),513),u(I,{ref_key:"popoverRef",ref:a,visible:"","virtual-ref":n.value,trigger:"click","virtual-triggering":"",placement:"bottom-start",width:200},{default:c(()=>[u($,{ref_key:"inputRef",ref:t,"model-value":e.modelValue,type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入","onUpdate:modelValue":V[0]||(V[0]=N=>y.$emit("update:model-value",N)),onBlur:_},null,8,["model-value"])]),_:1},8,["virtual-ref"])],64)}}},yt=x(_t,[["__scopeId","data-v-8839fea6"]]);const D="id",bt={__name:"index",setup(e){const d=f(!1),s=f(null);let o=400;const n=f([]),a=f(null),t=f(""),m=f(!0),p=f([]),v=[],_=["date","name","province","city","address"],y=[{province:"黑龙江",citys:["哈尔滨","齐齐哈尔","鸡西","鹤岗"]},{province:"吉林",citys:["长春","通化","白山","四平"]},{province:"辽宁",citys:["辽阳","大连","鞍山","抚顺"]}];let V=[],$=[];const I=i=>{let l={id:i};v.forEach(b=>{l[b]=""}),p.value.push(l)};(()=>{d.value=!0,setTimeout(()=>{d.value=!1,n.value=[{id:"1",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""},{id:"2",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""},{id:"3",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""},{id:"4",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""}],n.value.forEach(i=>{I(i[D])})},500)})();const r=(i,l,b)=>{const k=p.value.find(j=>j[D]===i);k&&(k[l]=b)},K=i=>{if(!i.province){i.city="";return}const l=i.city,{citys:b}=y.find(k=>k.province===i.province);b.includes(l)||(i.city="")},E=(i,l)=>{if(t.value=i[l],m.value=!0,l==="province")V=y.map(b=>b.province);else if(l==="city")if(i.province){const{citys:b}=y.find(k=>k.province===i.province);$=b}else $=[]},B=i=>{var l;if((l=a.value.popoverEl)!=null&&l.contains(i.target))return!1},M=(i,l)=>{_.includes(l)&&(t.value?i[l]!==t.value&&r(i[D],l,"success"):r(i[D],l,"error")),i[l]=t.value,l==="province"&&K(i)};function R(){const i=`${Date.now()}-${n.value.length+1}`;n.value.push({id:i,date:"",name:"",province:"",city:"",address:"",zip:"",remark:""}),m.value=!1,I(i),Re(()=>{s.value.ref.setScrollTop(o),s.value.ref.setScrollLeft(0);const l=n.value[n.value.length-1];s.value.openEditCell(l,"date")})}const S=i=>{const l=n.value.findIndex(b=>b.id===i);l>=0&&n.value.splice(l,1)};function X(i){let l=!1;if(n.value.forEach(b=>{for(const k in b)_.includes(k)&&!b[k]&&(l=!0,r(b[D],k,"error"))}),l){Pe.alert("必填项未填写","",{confirmButtonText:"确认",type:"error",callback:()=>{}});return}new Promise(b=>{setTimeout(()=>{b()},500)}).then(()=>{i&&i()})}return(i,l)=>{const b=ke,k=Be,j=ie,de=Se;return h(),w(Q,null,[u(k,{justify:"end",class:"add-wrapper"},{default:c(()=>[u(b,{type:"primary",plain:"",onClick:R},{default:c(()=>[H("新增")]),_:1})]),_:1}),Ce((h(),w("div",null,[u(tt,{ref_key:"tableRef",ref:s,data:n.value,"check-result":p.value,"max-height":g(o),"edit-row-key":D,"edit-close-before":B,onEditOpen:E,onEditClose:M},{default:c(()=>[u(j,{type:"index",fixed:"",label:"序号",width:"70"}),u(O,{prop:"date",label:"日期","min-width":140,required:""},{default:c(()=>[u(mt,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=C=>t.value=C),autofocus:m.value},null,8,["modelValue","autofocus"])]),_:1}),u(O,{prop:"name",label:"名字","min-width":120,required:""},{default:c(()=>[u(ee,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=C=>t.value=C)},null,8,["modelValue"])]),_:1}),u(O,{prop:"province",label:"省份","min-width":120,required:""},{default:c(()=>[u(ae,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=C=>t.value=C),options:g(V)},null,8,["modelValue","options"])]),_:1}),u(O,{prop:"city",label:"城市","min-width":120,required:""},{default:c(()=>[u(ae,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[3]||(l[3]=C=>t.value=C),options:g($)},null,8,["modelValue","options"])]),_:1}),u(O,{prop:"address",label:"地址","min-width":170,required:""},{default:c(()=>[u(ee,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=C=>t.value=C)},null,8,["modelValue"])]),_:1}),u(O,{prop:"zip",label:"邮编","min-width":120},{default:c(()=>[u(ee,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[5]||(l[5]=C=>t.value=C)},null,8,["modelValue"])]),_:1}),u(O,{prop:"remark",label:"备注","min-width":180},{default:c(()=>[u(yt,{ref_key:"editorRef",ref:a,modelValue:t.value,"onUpdate:modelValue":l[6]||(l[6]=C=>t.value=C)},null,8,["modelValue"])]),_:1}),u(j,{label:"操作","min-width":"70",fixed:"right"},{default:c(({row:C})=>[u(k,null,{default:c(()=>[u(b,{link:"",type:"primary",onClick:Rt=>S(C.id)},{default:c(()=>[H("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","check-result","max-height"])])),[[de,d.value]]),u(k,{justify:"center",class:"save-wrapper"},{default:c(()=>[u(b,{type:"primary",onClick:l[7]||(l[7]=C=>X())},{default:c(()=>[H("保存")]),_:1})]),_:1})],64)}}},gt=x(bt,[["__scopeId","data-v-286f709b"]]);const ht=e=>(we("data-v-9ab8e706"),e=e(),Ve(),e),Et=ht(()=>J("div",{class:"title"},"表格编辑",-1)),Ct={__name:"table",setup(e){return(d,s)=>{const o=Ie,n=$e;return h(),w(Q,null,[Et,u(n,{"model-value":"1"},{default:c(()=>[u(o,{label:"单元格编辑",name:"1"},{default:c(()=>[u(gt)]),_:1})]),_:1})],64)}}},Lt=x(Ct,[["__scopeId","data-v-9ab8e706"]]);export{Lt as default};
