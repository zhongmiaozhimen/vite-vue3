import{o as f,c as m,a as r,_ as k,i as A,r as b,g as F,b as x,d as g,h as $,j as w,k as B,t as V,n as T,w as C,l as P,F as M,m as H,E as j,q as R,s as E,u as W,v as D,p as L,f as N}from"./index-be6d7f34.js";import{E as q,a as K}from"./el-tab-pane-155c2687.js";/* empty css                */import{V as O}from"./index-886f1ce5.js";import"./strings-892f50c3.js";import"./index-c2198830.js";const G={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},J=r("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),Q=[J];function X(a,c){return f(),m("svg",G,Q)}const S={name:"ep-caret-right",render:X},Y={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Z=r("path",{fill:"currentColor",d:"m192 384l320 384l320-384z"},null,-1),ee=[Z];function te(a,c){return f(),m("svg",Y,ee)}const z={name:"ep-caret-bottom",render:te};const ne={class:"tree-node"},ae={key:0,class:"tree-node-children"},oe={__name:"tree-node",props:{node:{type:Object,default:()=>({})}},setup(a){const c=a,_=A("check"),s=b(c.node.expanded),d=()=>{s.value=!s.value},v=(h,i)=>{_(i,h.target.checked)};return(h,i)=>{const l=z,e=S,o=j,n=F("TreeNode",!0);return f(),m("div",ne,[r("div",{class:"tree-node-content",style:T({"padding-left":a.node.level*18+"px"}),onClick:d},[x(o,{class:"tree-node-expand-icon"},{default:g(()=>[a.node.data.children&&s.value?(f(),$(l,{key:0})):a.node.data.children?(f(),$(e,{key:1})):w("",!0)]),_:1}),r("input",{type:"checkbox",class:"checkbox",onClick:i[0]||(i[0]=B(()=>{},["stop"])),onInput:i[1]||(i[1]=t=>v(t,a.node.data))},null,32),r("span",null,V(a.node.data.label),1)],4),a.node.data.children?C((f(),m("div",ae,[(f(!0),m(M,null,H(a.node.data.children,t=>(f(),$(n,{key:t.id,node:t},null,8,["node"]))),128))],512)),[[P,s.value]]):w("",!0)])}}},ce=k(oe,[["__scopeId","data-v-f486543d"]]);const le={class:"tree"},se={class:"tree-content"},re={__name:"tree",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0}},setup(a){const c=a,_=[];R("check",(h,i)=>{i?_.push(h.id):_.some((l,e)=>{if(l===h.id)return _.splice(e,1),!0})});const d=b(v(c.data,0));function v(h,i){return h.map((l,e)=>{const o={id:`${Date.now()}-${e}`,level:i,expanded:!1,checked:!1,data:{}};return l.children?o.data={...l,children:v(l.children,i+1)}:o.data=l,o})}return E(()=>c.data,h=>{d.value=v(h,0)}),(h,i)=>(f(),m("div",le,[r("div",{class:"tree-inner",style:T({"max-height":a.maxHeight+"px"})},[r("div",se,[(f(!0),m(M,null,H(d.value,l=>(f(),$(ce,{key:l.id,node:l},null,8,["node"]))),128))])],4)]))}},de=k(re,[["__scopeId","data-v-c0956dda"]]);const ie={class:"wrap"},ue=400,_e={__name:"tree",setup(a){const c=b([]);let _=[5,4,3,3],s=0;d();function d(){_=i(),s=0,c.value=v(0,_[0])}function v(l,e){if(!e)return;const o=[];let n={};for(let t=0;t<e;t++)s++,n={id:`${Date.now()}-${t}`,label:`${s} --- ${h()}`,children:v(l+1,_[l+1])},o.push(n);return o}function h(){const l=["a","b","c","d","e","f","g","h","i","j","k"],e=Math.ceil(Math.random()*10);return l.slice(0,e).join("")}function i(){const l=[],e=Math.ceil(Math.random()*4);for(let o=0;o<e;o++)l.push(Math.ceil(Math.random()*10));return l}return(l,e)=>(f(),m("div",null,[r("button",{onClick:d},"更新数据"),r("div",ie,[x(de,{data:c.value,"max-height":ue},null,8,["data"])])]))}},he=k(_e,[["__scopeId","data-v-5206d7e1"]]);const pe={class:"tree"},fe=["onClick"],ve=["onUpdate:modelValue"],me={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},cache:{type:Number,default:2},buffer:{type:Number,default:1}},setup(a){const c=a;let _=-1,s=[];const d=b([]),v=()=>s.filter(e=>e.level===0),h=e=>{let o={};for(const n in e)n!=="children"&&(o[n]=e[n]);return o},i=(e,o)=>{let n=[];return e.forEach(t=>{_++,n.push({id:`${Date.now()}-${_}`,index:_,level:o,leaf:!(t.children&&t.children.length>0),expanded:!1,checked:!1,data:h(t)}),t.children&&t.children.length>0&&(n=n.concat(i(t.children,o+1)))}),n};E(()=>c.data,e=>{_=-1,s=i(e,0),d.value=v()},{immediate:!0,deep:!0});const l=e=>{if(!e.leaf)if(e.expanded){e.expanded=!1;let o=d.value.findIndex(n=>n.id===e.id);for(let n=o+1;n<d.value.length&&d.value[n].level>e.level;n++)d.value.splice(n,1),n--}else{e.expanded=!0;const o=[];for(let n=e.index+1;n<s.length&&s[n].level>e.level;n++)s[n].level===e.level+1&&o.push(s[n]);d.value.some((n,t)=>{if(n.id===e.id)return d.value.splice(t+1,0,...o),!0})}};return(e,o)=>{const n=z,t=S,p=j;return f(),m("div",pe,[x(O,{data:d.value,"max-height":a.maxHeight,buffer:a.buffer,cache:a.cache},{default:g(({item:u})=>[r("div",{class:"tree-node-content",style:T({"padding-left":u.level*18+"px"}),onClick:y=>l(u)},[x(p,{class:"tree-node-expand-icon"},{default:g(()=>[!u.leaf&&u.expanded?(f(),$(n,{key:0})):u.leaf?w("",!0):(f(),$(t,{key:1}))]),_:2},1024),C(r("input",{"onUpdate:modelValue":y=>u.checked=y,type:"checkbox",class:"checkbox",onClick:o[0]||(o[0]=B(()=>{},["stop"]))},null,8,ve),[[W,u.checked]]),r("span",null,V(u.data.label),1)],12,fe)]),_:1},8,["data","max-height","buffer","cache"])])}}},xe=k(me,[["__scopeId","data-v-ef5a8858"]]);const U=a=>(L("data-v-83774b21"),a=a(),N(),a),be={class:"form"},ge={class:"form-item"},$e=U(()=>r("label",null,"缓冲量",-1)),ke={class:"form-item"},ye=U(()=>r("label",null,"预先多加载的列表数量",-1)),Ce={class:"wrap"},we=400,Te={__name:"virtual-tree",setup(a){const c={buffer:0,cache:2},_=b([]),s=b(0),d=b(2);let v=[5,4,3,3],h=0;i();function i(){v=o(),h=0,_.value=l(0,v[0]),s.value=c.buffer,d.value=c.cache}function l(t,p){if(!p)return;const u=[];let y={};for(let I=0;I<p;I++)h++,y={label:`${h} --- ${e()}`,children:l(t+1,v[t+1])},u.push(y);return u}function e(){const t=["a","b","c","d","e","f","g","h","i","j","k"],p=Math.ceil(Math.random()*10);return t.slice(0,p).join("")}function o(){const t=[],p=Math.ceil(Math.random()*4);for(let u=0;u<p;u++)t.push(Math.ceil(Math.random()*10));return t}function n(t){c[t]!==""&&typeof c[t]=="string"&&(c[t]=c[t].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),c[t]=Number(c[t]))}return(t,p)=>(f(),m("div",null,[r("div",be,[r("div",ge,[$e,C(r("input",{"onUpdate:modelValue":p[0]||(p[0]=u=>c.buffer=u),placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:p[1]||(p[1]=u=>n("buffer"))},null,544),[[D,c.buffer,void 0,{number:!0}]])]),r("div",ke,[ye,C(r("input",{"onUpdate:modelValue":p[2]||(p[2]=u=>c.cache=u),placeholder:"请输入预先多加载的列表数量",maxlength:"5",onBlur:p[3]||(p[3]=u=>n("cache"))},null,544),[[D,c.cache,void 0,{number:!0}]])]),r("button",{onClick:i},"更新数据")]),r("div",Ce,[x(xe,{data:_.value,"max-height":we,buffer:s.value,cache:d.value},null,8,["data","buffer","cache"])])]))}},Me=k(Te,[["__scopeId","data-v-83774b21"]]);const Ie=a=>(L("data-v-60abe013"),a=a(),N(),a),De=Ie(()=>r("div",{class:"title"},"Tree 树形控件",-1)),Be={__name:"index",setup(a){return(c,_)=>{const s=K,d=q;return f(),m(M,null,[De,x(d,{"model-value":"1"},{default:g(()=>[x(s,{label:"树形控件",name:"1"},{default:g(()=>[x(he)]),_:1}),x(s,{label:"虚拟树形控件",name:"2",lazy:""},{default:g(()=>[x(Me)]),_:1})]),_:1})],64)}}},Se=k(Be,[["__scopeId","data-v-60abe013"]]);export{Se as default};
