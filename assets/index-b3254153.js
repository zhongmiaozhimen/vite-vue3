import{_ as y,i as U,r as b,g as C,o as f,c as x,a as u,b as m,d as g,h as k,j as M,k as V,t as H,n as w,w as T,l as z,F as I,m as j,E,q as A,s as L,u as F,v as B,p as N,f as S}from"./index-6269380d.js";import{E as P,a as W}from"./el-tab-pane-1ee04ffd.js";/* empty css                */import{V as q}from"./index-3f07e9a0.js";import"./strings-9dcb04b0.js";import"./index-89cf82f9.js";const K={class:"tree-node"},O={key:0,class:"tree-node-children"},G={__name:"tree-node",props:{node:{type:Object,default:()=>({})}},setup(a){const c=a,_=U("check"),d=b(c.node.expanded),r=()=>{d.value=!d.value},v=(p,s)=>{_(s,p.target.checked)};return(p,s)=>{const l=C("CaretBottom"),e=C("CaretRight"),o=E,n=C("TreeNode",!0);return f(),x("div",K,[u("div",{class:"tree-node-content",style:w({"padding-left":a.node.level*18+"px"}),onClick:r},[m(o,{class:"tree-node-expand-icon"},{default:g(()=>[a.node.data.children&&d.value?(f(),k(l,{key:0})):a.node.data.children?(f(),k(e,{key:1})):M("",!0)]),_:1}),u("input",{type:"checkbox",class:"checkbox",onClick:s[0]||(s[0]=V(()=>{},["stop"])),onInput:s[1]||(s[1]=t=>v(t,a.node.data))},null,32),u("span",null,H(a.node.data.label),1)],4),a.node.data.children?T((f(),x("div",O,[(f(!0),x(I,null,j(a.node.data.children,t=>(f(),k(n,{key:t.id,node:t},null,8,["node"]))),128))],512)),[[z,d.value]]):M("",!0)])}}},J=y(G,[["__scopeId","data-v-0302d19d"]]);const Q={class:"tree"},X={class:"tree-content"},Y={__name:"tree",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0}},setup(a){const c=a,_=[];A("check",(p,s)=>{s?_.push(p.id):_.some((l,e)=>{if(l===p.id)return _.splice(e,1),!0})});const r=b(v(c.data,0));function v(p,s){return p.map((l,e)=>{const o={id:`${Date.now()}-${e}`,level:s,expanded:!1,checked:!1,data:{}};return l.children?o.data={...l,children:v(l.children,s+1)}:o.data=l,o})}return L(()=>c.data,p=>{r.value=v(p,0)}),(p,s)=>(f(),x("div",Q,[u("div",{class:"tree-inner",style:w({"max-height":a.maxHeight+"px"})},[u("div",X,[(f(!0),x(I,null,j(r.value,l=>(f(),k(J,{key:l.id,node:l},null,8,["node"]))),128))])],4)]))}},Z=y(Y,[["__scopeId","data-v-c0956dda"]]);const ee={class:"wrap"},te=400,ne={__name:"tree",setup(a){const c=b([]);let _=[5,4,3,3],d=0;r();function r(){_=s(),d=0,c.value=v(0,_[0])}function v(l,e){if(!e)return;const o=[];let n={};for(let t=0;t<e;t++)d++,n={id:`${Date.now()}-${t}`,label:`${d} --- ${p()}`,children:v(l+1,_[l+1])},o.push(n);return o}function p(){const l=["a","b","c","d","e","f","g","h","i","j","k"],e=Math.ceil(Math.random()*10);return l.slice(0,e).join("")}function s(){const l=[],e=Math.ceil(Math.random()*4);for(let o=0;o<e;o++)l.push(Math.ceil(Math.random()*10));return l}return(l,e)=>(f(),x("div",null,[u("button",{onClick:r},"更新数据"),u("div",ee,[m(Z,{data:c.value,"max-height":te},null,8,["data"])])]))}},ae=y(ne,[["__scopeId","data-v-5206d7e1"]]);const oe={class:"tree"},le=["onClick"],ce=["onUpdate:modelValue"],de={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},cache:{type:Number,default:2},buffer:{type:Number,default:1}},setup(a){const c=a;let _=-1,d=[];const r=b([]),v=()=>d.filter(e=>e.level===0),p=e=>{let o={};for(const n in e)n!=="children"&&(o[n]=e[n]);return o},s=(e,o)=>{let n=[];return e.forEach(t=>{_++,n.push({id:`${Date.now()}-${_}`,index:_,level:o,leaf:!(t.children&&t.children.length>0),expanded:!1,checked:!1,data:p(t)}),t.children&&t.children.length>0&&(n=n.concat(s(t.children,o+1)))}),n};L(()=>c.data,e=>{_=-1,d=s(e,0),r.value=v()},{immediate:!0,deep:!0});const l=e=>{if(!e.leaf)if(e.expanded){e.expanded=!1;let o=r.value.findIndex(n=>n.id===e.id);for(let n=o+1;n<r.value.length&&r.value[n].level>e.level;n++)r.value.splice(n,1),n--}else{e.expanded=!0;const o=[];for(let n=e.index+1;n<d.length&&d[n].level>e.level;n++)d[n].level===e.level+1&&o.push(d[n]);r.value.some((n,t)=>{if(n.id===e.id)return r.value.splice(t+1,0,...o),!0})}};return(e,o)=>{const n=C("CaretBottom"),t=C("CaretRight"),h=E;return f(),x("div",oe,[m(q,{data:r.value,"max-height":a.maxHeight,buffer:a.buffer,cache:a.cache},{default:g(({item:i})=>[u("div",{class:"tree-node-content",style:w({"padding-left":i.level*18+"px"}),onClick:$=>l(i)},[m(h,{class:"tree-node-expand-icon"},{default:g(()=>[!i.leaf&&i.expanded?(f(),k(n,{key:0})):i.leaf?M("",!0):(f(),k(t,{key:1}))]),_:2},1024),T(u("input",{"onUpdate:modelValue":$=>i.checked=$,type:"checkbox",class:"checkbox",onClick:o[0]||(o[0]=V(()=>{},["stop"]))},null,8,ce),[[F,i.checked]]),u("span",null,H(i.data.label),1)],12,le)]),_:1},8,["data","max-height","buffer","cache"])])}}},re=y(de,[["__scopeId","data-v-a835d568"]]);const R=a=>(N("data-v-83774b21"),a=a(),S(),a),se={class:"form"},ie={class:"form-item"},ue=R(()=>u("label",null,"缓冲量",-1)),_e={class:"form-item"},pe=R(()=>u("label",null,"预先多加载的列表数量",-1)),he={class:"wrap"},fe=400,ve={__name:"virtual-tree",setup(a){const c={buffer:0,cache:2},_=b([]),d=b(0),r=b(2);let v=[5,4,3,3],p=0;s();function s(){v=o(),p=0,_.value=l(0,v[0]),d.value=c.buffer,r.value=c.cache}function l(t,h){if(!h)return;const i=[];let $={};for(let D=0;D<h;D++)p++,$={label:`${p} --- ${e()}`,children:l(t+1,v[t+1])},i.push($);return i}function e(){const t=["a","b","c","d","e","f","g","h","i","j","k"],h=Math.ceil(Math.random()*10);return t.slice(0,h).join("")}function o(){const t=[],h=Math.ceil(Math.random()*4);for(let i=0;i<h;i++)t.push(Math.ceil(Math.random()*10));return t}function n(t){c[t]!==""&&typeof c[t]=="string"&&(c[t]=c[t].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),c[t]=Number(c[t]))}return(t,h)=>(f(),x("div",null,[u("div",se,[u("div",ie,[ue,T(u("input",{"onUpdate:modelValue":h[0]||(h[0]=i=>c.buffer=i),placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:h[1]||(h[1]=i=>n("buffer"))},null,544),[[B,c.buffer,void 0,{number:!0}]])]),u("div",_e,[pe,T(u("input",{"onUpdate:modelValue":h[2]||(h[2]=i=>c.cache=i),placeholder:"请输入预先多加载的列表数量",maxlength:"5",onBlur:h[3]||(h[3]=i=>n("cache"))},null,544),[[B,c.cache,void 0,{number:!0}]])]),u("button",{onClick:s},"更新数据")]),u("div",he,[m(re,{data:_.value,"max-height":fe,buffer:d.value,cache:r.value},null,8,["data","buffer","cache"])])]))}},me=y(ve,[["__scopeId","data-v-83774b21"]]);const xe=a=>(N("data-v-60abe013"),a=a(),S(),a),be=xe(()=>u("div",{class:"title"},"Tree 树形控件",-1)),ge={__name:"index",setup(a){return(c,_)=>{const d=W,r=P;return f(),x(I,null,[be,m(r,{"model-value":"1"},{default:g(()=>[m(d,{label:"树形控件",name:"1"},{default:g(()=>[m(ae)]),_:1}),m(d,{label:"虚拟树形控件",name:"2",lazy:""},{default:g(()=>[m(me)]),_:1})]),_:1})],64)}}},we=y(ge,[["__scopeId","data-v-60abe013"]]);export{we as default};
