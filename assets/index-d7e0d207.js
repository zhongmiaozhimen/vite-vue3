import{_ as $,i as U,r as g,g as x,o as f,c as b,a as u,b as m,d as k,h as y,j as M,k as V,t as H,n as w,w as T,l as z,F as I,m as j,q as A,s as L,u as E,v as B,p as N,f as S}from"./index-91a48a92.js";import{V as F}from"./index-82c16ea0.js";import"./index-19276679.js";const W={class:"tree-node"},q={key:0,class:"tree-node-children"},K={__name:"tree-node",props:{node:{type:Object,default:()=>({})}},setup(a){const c=a,_=U("check"),d=g(c.node.expanded),r=()=>{d.value=!d.value},v=(p,s)=>{_(s,p.target.checked)};return(p,s)=>{const l=x("CaretBottom"),e=x("CaretRight"),o=x("el-icon"),n=x("TreeNode",!0);return f(),b("div",W,[u("div",{class:"tree-node-content",style:w({"padding-left":a.node.level*18+"px"}),onClick:r},[m(o,{class:"tree-node-expand-icon"},{default:k(()=>[a.node.data.children&&d.value?(f(),y(l,{key:0})):a.node.data.children?(f(),y(e,{key:1})):M("",!0)]),_:1}),u("input",{type:"checkbox",class:"checkbox",onClick:s[0]||(s[0]=V(()=>{},["stop"])),onInput:s[1]||(s[1]=t=>v(t,a.node.data))},null,32),u("span",null,H(a.node.data.label),1)],4),a.node.data.children?T((f(),b("div",q,[(f(!0),b(I,null,j(a.node.data.children,t=>(f(),y(n,{key:t.id,node:t},null,8,["node"]))),128))],512)),[[z,d.value]]):M("",!0)])}}},O=$(K,[["__scopeId","data-v-0302d19d"]]);const P={class:"tree"},G={class:"tree-content"},J={__name:"tree",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0}},setup(a){const c=a,_=[];A("check",(p,s)=>{s?_.push(p.id):_.some((l,e)=>{if(l===p.id)return _.splice(e,1),!0})});const r=g(v(c.data,0));function v(p,s){return p.map((l,e)=>{const o={id:`${Date.now()}-${e}`,level:s,expanded:!1,checked:!1,data:{}};return l.children?o.data={...l,children:v(l.children,s+1)}:o.data=l,o})}return L(()=>c.data,p=>{r.value=v(p,0)}),(p,s)=>(f(),b("div",P,[u("div",{class:"tree-inner",style:w({"max-height":a.maxHeight+"px"})},[u("div",G,[(f(!0),b(I,null,j(r.value,l=>(f(),y(O,{key:l.id,node:l},null,8,["node"]))),128))])],4)]))}},Q=$(J,[["__scopeId","data-v-c0956dda"]]);const X={class:"wrap"},Y=400,Z={__name:"tree",setup(a){const c=g([]);let _=[5,4,3,3],d=0;r();function r(){_=s(),d=0,c.value=v(0,_[0])}function v(l,e){if(!e)return;const o=[];let n={};for(let t=0;t<e;t++)d++,n={id:`${Date.now()}-${t}`,label:`${d} --- ${p()}`,children:v(l+1,_[l+1])},o.push(n);return o}function p(){const l=["a","b","c","d","e","f","g","h","i","j","k"],e=Math.ceil(Math.random()*10);return l.slice(0,e).join("")}function s(){const l=[],e=Math.ceil(Math.random()*4);for(let o=0;o<e;o++)l.push(Math.ceil(Math.random()*10));return l}return(l,e)=>(f(),b("div",null,[u("button",{onClick:r},"更新数据"),u("div",X,[m(Q,{data:c.value,"max-height":Y},null,8,["data"])])]))}},ee=$(Z,[["__scopeId","data-v-5206d7e1"]]);const te={class:"tree"},ne=["onClick"],ae=["onUpdate:modelValue"],oe={__name:"index",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},cache:{type:Number,default:2},buffer:{type:Number,default:1}},setup(a){const c=a;let _=-1,d=[];const r=g([]),v=()=>d.filter(e=>e.level===0),p=e=>{let o={};for(const n in e)n!=="children"&&(o[n]=e[n]);return o},s=(e,o)=>{let n=[];return e.forEach(t=>{_++,n.push({id:`${Date.now()}-${_}`,index:_,level:o,leaf:!(t.children&&t.children.length>0),expanded:!1,checked:!1,data:p(t)}),t.children&&t.children.length>0&&(n=n.concat(s(t.children,o+1)))}),n};L(()=>c.data,e=>{_=-1,d=s(e,0),r.value=v()},{immediate:!0,deep:!0});const l=e=>{if(!e.leaf)if(e.expanded){e.expanded=!1;let o=r.value.findIndex(n=>n.id===e.id);for(let n=o+1;n<r.value.length&&r.value[n].level>e.level;n++)r.value.splice(n,1),n--}else{e.expanded=!0;const o=[];for(let n=e.index+1;n<d.length&&d[n].level>e.level;n++)d[n].level===e.level+1&&o.push(d[n]);r.value.some((n,t)=>{if(n.id===e.id)return r.value.splice(t+1,0,...o),!0})}};return(e,o)=>{const n=x("CaretBottom"),t=x("CaretRight"),h=x("el-icon");return f(),b("div",te,[m(F,{data:r.value,"max-height":a.maxHeight,buffer:a.buffer,cache:a.cache},{default:k(({item:i})=>[u("div",{class:"tree-node-content",style:w({"padding-left":i.level*18+"px"}),onClick:C=>l(i)},[m(h,{class:"tree-node-expand-icon"},{default:k(()=>[!i.leaf&&i.expanded?(f(),y(n,{key:0})):i.leaf?M("",!0):(f(),y(t,{key:1}))]),_:2},1024),T(u("input",{"onUpdate:modelValue":C=>i.checked=C,type:"checkbox",class:"checkbox",onClick:o[0]||(o[0]=V(()=>{},["stop"]))},null,8,ae),[[E,i.checked]]),u("span",null,H(i.data.label),1)],12,ne)]),_:1},8,["data","max-height","buffer","cache"])])}}},le=$(oe,[["__scopeId","data-v-a835d568"]]);const R=a=>(N("data-v-83774b21"),a=a(),S(),a),ce={class:"form"},de={class:"form-item"},re=R(()=>u("label",null,"缓冲量",-1)),se={class:"form-item"},ie=R(()=>u("label",null,"预先多加载的列表数量",-1)),ue={class:"wrap"},_e=400,pe={__name:"virtual-tree",setup(a){const c={buffer:0,cache:2},_=g([]),d=g(0),r=g(2);let v=[5,4,3,3],p=0;s();function s(){v=o(),p=0,_.value=l(0,v[0]),d.value=c.buffer,r.value=c.cache}function l(t,h){if(!h)return;const i=[];let C={};for(let D=0;D<h;D++)p++,C={label:`${p} --- ${e()}`,children:l(t+1,v[t+1])},i.push(C);return i}function e(){const t=["a","b","c","d","e","f","g","h","i","j","k"],h=Math.ceil(Math.random()*10);return t.slice(0,h).join("")}function o(){const t=[],h=Math.ceil(Math.random()*4);for(let i=0;i<h;i++)t.push(Math.ceil(Math.random()*10));return t}function n(t){c[t]!==""&&typeof c[t]=="string"&&(c[t]=c[t].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),c[t]=Number(c[t]))}return(t,h)=>(f(),b("div",null,[u("div",ce,[u("div",de,[re,T(u("input",{"onUpdate:modelValue":h[0]||(h[0]=i=>c.buffer=i),placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:h[1]||(h[1]=i=>n("buffer"))},null,544),[[B,c.buffer,void 0,{number:!0}]])]),u("div",se,[ie,T(u("input",{"onUpdate:modelValue":h[2]||(h[2]=i=>c.cache=i),placeholder:"请输入预先多加载的列表数量",maxlength:"5",onBlur:h[3]||(h[3]=i=>n("cache"))},null,544),[[B,c.cache,void 0,{number:!0}]])]),u("button",{onClick:s},"更新数据")]),u("div",ue,[m(le,{data:_.value,"max-height":_e,buffer:d.value,cache:r.value},null,8,["data","buffer","cache"])])]))}},he=$(pe,[["__scopeId","data-v-83774b21"]]);const fe=a=>(N("data-v-60abe013"),a=a(),S(),a),ve=fe(()=>u("div",{class:"title"},"Tree 树形控件",-1)),me={__name:"index",setup(a){return(c,_)=>{const d=x("el-tab-pane"),r=x("el-tabs");return f(),b(I,null,[ve,m(r,{"model-value":"1"},{default:k(()=>[m(d,{label:"树形控件",name:"1"},{default:k(()=>[m(ee)]),_:1}),m(d,{label:"虚拟树形控件",name:"2",lazy:""},{default:k(()=>[m(he)]),_:1})]),_:1})],64)}}},ke=$(me,[["__scopeId","data-v-60abe013"]]);export{ke as default};
