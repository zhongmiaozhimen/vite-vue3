import{_ as V,B as G,r as u,D as J,J as U,o as n,c,a as _,n as M,F as W,m as B,y as k,z as I,e as O,t as S,G as K,b as y,h as E,d as C,j as L,g as T,p as P,f as Q}from"./index-bade218b.js";import{_ as X}from"./index-78dbcdfe.js";const Y={class:"table-inner"},Z={class:"table-header"},ee=["onMouseover","onMouseout"],te={class:"table-body-wrapper"},le=["onMouseover","onMouseout"],ae=100,oe={__name:"index",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(p){const l=p;G(t=>({"13c6f53d":w.value}));const f=u([]),i=u([]);let v=0;f.value=l.data.map((t,s)=>({id:`row-${Date.now()}-${s}`,data:t})),i.value=l.columns.map((t,s)=>{const a=t.minWidth||ae;v+=a;let b="";return(t.fixed==="left"||t.fixed==="right")&&(b=`${t.fixed}-fixed`),{id:`column-${Date.now()}-${s}`,minWidth:a,className:b,data:t}}),l.columns.some((t,s)=>{if(t.fixed==="left"&&l.columns[s+1].fixed!=="left")return i.value[s].className+=" last-left-fixed",!0});const e=l.columns.findIndex(t=>t.fixed==="right");e>=0&&(i.value[e].className+=" first-right-fixed");const o=u(null),d=u(null),r=u(null),h=u(!1),g=u(!1),w=u("0px");let $=0;const x=u(""),z=u(null),F=()=>{r.value.scrollWidth>r.value.clientWidth?h.value=!0:h.value=!1,r.value.scrollHeight>r.value.clientHeight?(g.value=!0,w.value=`${o.value.clientWidth-17}px`):(g.value=!1,w.value="100%"),$=r.value.scrollWidth-r.value.clientWidth,h.value&&$>0?x.value="scrolling-left":x.value=""},q=t=>{if($===0)return;const s=t.target.scrollLeft;d.value.scrollLeft=s;const a=Math.abs($-s);s===0?x.value="scrolling-left":s===$||a<=1?x.value="scrolling-right":x.value="scrolling-middle"},R=(t,s)=>{s.showOverflowTooltip&&(z.value=t.target)},j=()=>{z.value=null};let D=!1;const H=new ResizeObserver(()=>{D||(D=!0,requestAnimationFrame(()=>{D=!1}),F())});return J(()=>{H.observe(o.value)}),U(()=>{H.unobserve(o.value)}),(t,s)=>(n(),c("div",{ref_key:"tableRef",ref:o,class:k(["table",h.value&&"horizontal-scroll",g.value&&"vertical-scroll",x.value])},[_("div",Y,[_("div",Z,[_("div",{ref_key:"tableHeaderContentRef",ref:d,class:"table-header-content",style:M({width:w.value})},[(n(!0),c(W,null,B(i.value,a=>(n(),c("div",{key:a.id,class:k(["table-cell",a.className]),style:M({"min-width":a.minWidth+"px"}),onMouseover:b=>R(b,a.data),onMouseout:b=>j(b,a.data)},[_("div",{class:k(["cell-inner",a.data.showOverflowTooltip&&"tooltip"])},[I(t.$slots,"headerCell",{prop:a.data.prop},()=>[O(S(a.data.label),1)],!0)],2)],46,ee))),128))],4)]),_("div",te,[_("div",{ref_key:"tableBodyRef",ref:r,class:"table-body",onScroll:q},[_("div",{class:"table-body-content",style:M({"min-width":K(v)+"px",width:w.value})},[(n(!0),c(W,null,B(f.value,(a,b)=>(n(),c("div",{key:a.id,class:"table-row"},[(n(!0),c(W,null,B(i.value,m=>(n(),c("div",{key:m.id,class:k(["table-cell",m.className]),style:M({"min-width":m.minWidth+"px"}),onMouseover:N=>R(N,m.data),onMouseout:N=>j(N,m.data)},[_("div",{class:k(["cell-inner",m.data.showOverflowTooltip&&"tooltip"])},[I(t.$slots,"bodyCell",{index:b,row:a.data,prop:m.data.prop},()=>[O(S(a.data[m.data.prop]),1)],!0)],2)],46,le))),128))]))),128))],4)],544)])]),y(X,{"mouseenter-el":z.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])],2))}},A=V(oe,[["__scopeId","data-v-49b9f079"]]),se={key:0},ne=["onClick"],re={__name:"index",setup(p){const l=[],f=[],i=()=>{console.log("--详情--")},v=()=>{const e=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],o=Math.ceil(Math.random()*10);return e.slice(0,o).join("")};for(let e=1;e<=8;e++)l.push({prop:`column-${e}`,label:"title-"+e,showOverflowTooltip:!0});l.push({prop:"opt",label:"操作"});for(let e=1;e<=15;e++){let o={};l.forEach(d=>{o[d.prop]=v()}),f.push(o)}return(e,o)=>(n(),E(A,{data:f,columns:l},{bodyCell:C(({row:d,prop:r,index:h})=>[r==="index"?(n(),c("span",se,S(h+1),1)):r==="opt"?(n(),c("span",{key:1,onClick:g=>i(d)},"详情",8,ne)):L("",!0)]),_:1}))}},ie={key:0},ce=["onClick"],de={__name:"index2",setup(p){const l=[],f=[],i=()=>{console.log("--详情--")},v=()=>{const e=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],o=Math.ceil(Math.random()*10);return e.slice(0,o).join("")};for(let e=1;e<=8;e++)l.push({prop:`column-${e}`,label:"title-"+e,showOverflowTooltip:!0});l.unshift({prop:"index",label:"序号",fixed:"left"}),l.push({prop:"opt",label:"操作",fixed:"right"});for(let e=1;e<=15;e++){let o={};l.forEach(d=>{o[d.prop]=v()}),f.push(o)}return(e,o)=>(n(),E(A,{data:f,columns:l},{bodyCell:C(({row:d,prop:r,index:h})=>[r==="index"?(n(),c("span",ie,S(h+1),1)):r==="opt"?(n(),c("span",{key:1,onClick:g=>i(d)},"详情",8,ce)):L("",!0)]),_:1}))}};const ue=p=>(P("data-v-5d15bc15"),p=p(),Q(),p),fe=ue(()=>_("div",{class:"title"},"表格",-1)),_e={__name:"index",setup(p){return(l,f)=>{const i=T("el-tab-pane"),v=T("el-tabs");return n(),c(W,null,[fe,y(v,{"model-value":"1"},{default:C(()=>[y(i,{label:"表格 1",name:"1"},{default:C(()=>[y(re)]),_:1}),y(i,{label:"表格 2（固定列）",name:"2",lazy:""},{default:C(()=>[y(de)]),_:1})]),_:1})],64)}}},he=V(_e,[["__scopeId","data-v-5d15bc15"]]);export{he as default};
