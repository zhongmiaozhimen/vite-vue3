import{_ as X}from"./index-778a039a.js";import{_ as U,r as f,D as Y,J as Z,o as r,c as u,a as h,n as $,F as S,m as H,y as M,z as V,e as q,t as z,j,b as y,A as ee,h as G,d as C,g as J,p as te,f as le}from"./index-b356ac0d.js";const ae={class:"table-inner"},se={class:"table-header-wrapper"},oe=["onMouseover","onMouseout"],ne={class:"table-body-wrapper"},re=["onMouseover","onMouseout"],T=100,ie={__name:"index",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(x){const t=x,b=f([]),i=f([]);let d=0;b.value=t.data.map((e,s)=>({id:`row-${Date.now()}-${s}`,data:e})),i.value=t.columns.map((e,s)=>{let a="";(e.fixed==="left"||e.fixed==="right")&&(a=`${e.fixed}-fixed`);const o=e.minWidth||T;return d+=o,{id:`column-${Date.now()}-${s}`,minWidth:o,className:a,data:e}}),t.columns.some((e,s)=>{if(e.fixed==="left"&&t.columns[s+1].fixed!=="left")return i.value[s].className+=" last-left-fixed",!0});const l=t.columns.findIndex(e=>e.fixed==="right");l>=0&&(i.value[l].className+=" first-right-fixed");const n=f(null),p=f(null),c=f(null),v=f(!1),_=f(!1),k=f("100%"),w=f("100%");let W=0;const g=f(""),D=f(null),N=f(null),I=()=>{let e=0,s=null,a=null;for(let o=0;o<t.columns.length;o++)t.columns[o].fixed==="left"?(s=e,e+=t.columns[o].minWidth||T):s=null,i.value[o].left=s;e=0;for(let o=t.columns.length-1;o>=0;o--)t.columns[o].fixed==="right"?(a=e,e+=t.columns[o].minWidth||T,D.value||(D.value={position:"sticky",right:0,"z-index":9})):a=null,i.value[o].right=a};I();const L=e=>e||e===0?e+"px":null,O=(e,s)=>e||e===0?s?e+17+"px":e+"px":null,P=()=>{c.value.clientWidth<d?(v.value=!0,g.value="scrolling-left",W=d-c.value.clientWidth):(v.value=!1,g.value=""),c.value.scrollHeight>c.value.clientHeight?_.value=!0:_.value=!1,ee(()=>{p.value.scrollLeft=c.value.scrollLeft,!v.value&&!_.value?(k.value="100%",w.value="100%"):!v.value&&_.value?(k.value=n.value.clientWidth-17+"px",w.value=n.value.clientWidth+"px"):v.value&&!_.value?(k.value=d+"px",w.value=d+"px"):(k.value=d+"px",w.value=d+17+"px"),I()})},Q=e=>{if(W===0)return;const s=e.target.scrollLeft;p.value.scrollLeft=s;const a=Math.abs(W-s);v.value&&(s===0?g.value="scrolling-left":s===W||a<=1?g.value="scrolling-right":g.value="scrolling-middle")},A=(e,s)=>{s.showOverflowTooltip&&(N.value=e.target)},E=()=>{N.value=null};let R=!1;const F=new ResizeObserver(()=>{R||(R=!0,requestAnimationFrame(()=>{R=!1}),P())});return Y(()=>{F.observe(n.value)}),Z(()=>{F.unobserve(n.value)}),(e,s)=>(r(),u("div",{ref_key:"tableRef",ref:n,class:M(["table",v.value&&"horizontal-scroll",_.value&&"vertical-scroll",g.value])},[h("div",ae,[h("div",se,[h("div",{ref_key:"tableHeaderRef",ref:p,class:"table-header"},[h("div",{class:"table-header-content",style:$({width:w.value})},[(r(!0),u(S,null,H(i.value,a=>(r(),u("div",{key:a.id,class:M(["table-cell",a.className]),style:$({left:L(a.left),right:O(a.right,_.value)}),onMouseover:o=>A(o,a.data),onMouseout:o=>E(o,a.data)},[h("div",{class:M(["cell-inner",a.data.showOverflowTooltip&&"tooltip"])},[V(e.$slots,"headerCell",{prop:a.data.prop},()=>[q(z(a.data.label),1)],!0)],2)],46,oe))),128)),_.value?(r(),u("div",{key:0,class:"gutter",style:$(D.value)},null,4)):j("",!0)],4)],512)]),h("div",ne,[h("div",{ref_key:"tableBodyRef",ref:c,class:"table-body",onScroll:Q},[h("div",{class:"table-body-content",style:$({width:k.value})},[(r(!0),u(S,null,H(b.value,(a,o)=>(r(),u("div",{key:a.id,class:"table-row"},[(r(!0),u(S,null,H(i.value,m=>(r(),u("div",{key:m.id,class:M(["table-cell",m.className]),style:$({left:L(m.left),right:O(m.right,!1)}),onMouseover:B=>A(B,m.data),onMouseout:B=>E(B,m.data)},[h("div",{class:M(["cell-inner",m.data.showOverflowTooltip&&"tooltip"])},[V(e.$slots,"bodyCell",{index:o,row:a.data,prop:m.data.prop},()=>[q(z(a.data[m.data.prop]),1)],!0)],2)],46,re))),128))]))),128))],4)],544)])]),y(X,{"mouseenter-el":N.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])],2))}},K=U(ie,[["__scopeId","data-v-2c3a5acd"]]),ce={key:0},de=["onClick"],ue={__name:"index",setup(x){const t=[],b=[],i=()=>{console.log("--详情--")},d=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],n=Math.ceil(Math.random()*10);return l.slice(0,n).join("")};for(let l=1;l<=8;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.push({prop:"opt",label:"操作"});for(let l=1;l<=15;l++){let n={};t.forEach(p=>{n[p.prop]=d()}),b.push(n)}return(l,n)=>(r(),G(K,{data:b,columns:t},{bodyCell:C(({row:p,prop:c,index:v})=>[c==="index"?(r(),u("span",ce,z(v+1),1)):c==="opt"?(r(),u("span",{key:1,onClick:_=>i(p)},"详情",8,de)):j("",!0)]),_:1}))}},fe={key:0},pe=["onClick"],ve={__name:"index2",setup(x){const t=[],b=[],i=()=>{console.log("--详情--")},d=()=>{const l=["a"," bb"," ccc"," dddd"," eeeee"," ffffff"," ggggg"," hhhh"," iii"," jj"," k"],n=Math.ceil(Math.random()*10);return l.slice(0,n).join("")};for(let l=1;l<=8;l++)t.push({prop:`column-${l}`,label:"title-"+l,showOverflowTooltip:!0});t.unshift({prop:"index2",label:"序号2",fixed:"left"}),t.unshift({prop:"index",label:"序号",fixed:"left"}),t.push({prop:"opt",label:"操作",fixed:"right"}),t.push({prop:"opt2",label:"操作2",fixed:"right"});for(let l=1;l<=15;l++){let n={};t.forEach(p=>{n[p.prop]=d()}),b.push(n)}return(l,n)=>(r(),G(K,{data:b,columns:t},{bodyCell:C(({row:p,prop:c,index:v})=>[c==="index"||c==="index2"?(r(),u("span",fe,z(v+1),1)):c==="opt"||c==="opt2"?(r(),u("span",{key:1,onClick:_=>i(p)},"详情",8,pe)):j("",!0)]),_:1}))}};const _e=x=>(te("data-v-5d15bc15"),x=x(),le(),x),he=_e(()=>h("div",{class:"title"},"表格",-1)),be={__name:"index",setup(x){return(t,b)=>{const i=J("el-tab-pane"),d=J("el-tabs");return r(),u(S,null,[he,y(d,{"model-value":"1"},{default:C(()=>[y(i,{label:"表格 1",name:"1"},{default:C(()=>[y(ue)]),_:1}),y(i,{label:"表格 2（固定列）",name:"2",lazy:""},{default:C(()=>[y(ve)]),_:1})]),_:1})],64)}}},ge=U(be,[["__scopeId","data-v-5d15bc15"]]);export{ge as default};
