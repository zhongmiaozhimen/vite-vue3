import{L as te,M as W,y as P,r as _,q as D,i as H,C as L,G as g,D as ie,N as F,O as Z,P as S,Q as O,R as ue,S as de,U as z,V as pe,W as ce,o as h,h as Y,d as f,c as V,x as ne,t as q,j as ee,e as j,X as fe,Y as ae,Z as me,$ as ve,_ as T,a0 as _e,b as i,a as G,E as ye,F as J,m as be,z as ge,a1 as he,p as Ee,f as Ce}from"./index-0f7d31d1.js";import{E as Re,a as ke}from"./el-tab-pane-5a1d917c.js";import{E as we,a as re}from"./el-table-ec62e63c.js";import"./el-scrollbar-09b196cd.js";import{E as Ve}from"./el-row-1b4ab8d1.js";/* empty css                *//* empty css                 */import{E as se}from"./index-935e5d9f.js";import{E as $e}from"./el-date-picker-e9b8a2a9.js";import{E as Ie,a as Se}from"./el-select-81ef7fe8.js";import{E as Be}from"./index-b28ba6c6.js";import"./strings-90319d50.js";const Te=W({inheritAttrs:!1});function xe(t,r,u,e,a,l){return P(t.$slots,"default")}var Ne=te(Te,[["render",xe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Oe=W({name:"ElCollectionItem",inheritAttrs:!1});function Pe(t,r,u,e,a,l){return P(t.$slots,"default")}var Le=te(Oe,[["render",Pe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Ue="data-el-collection-item",Me=t=>{const r=`El${t}Collection`,u=`${r}Item`,e=Symbol(r),a=Symbol(u),l={...Ne,name:r,setup(){const m=_(null),v=new Map;D(e,{itemMap:v,getItems:()=>{const c=g(m);if(!c)return[];const y=Array.from(c.querySelectorAll(`[${Ue}]`));return[...v.values()].sort(($,I)=>y.indexOf($.ref)-y.indexOf(I.ref))},collectionRef:m})}},d={...Le,name:u,setup(m,{attrs:v}){const p=_(null),c=H(e,void 0);D(a,{collectionItemRef:p}),L(()=>{const y=g(p);y&&c.itemMap.set(y,{ref:y,...v})}),ie(()=>{const y=g(p);c.itemMap.delete(y)})}};return{COLLECTION_INJECTION_KEY:e,COLLECTION_ITEM_INJECTION_KEY:a,ElCollection:l,ElCollectionItem:d}},Q=F({trigger:Z.trigger,effect:{...S.effect,default:"light"},type:{type:O(String)},placement:{type:O(String),default:"bottom"},popperOptions:{type:O(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:O([Number,String]),default:0},maxHeight:{type:O([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:O(Object)},teleported:S.teleported});F({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:ue}});F({onKeydown:{type:O(Function)}});Me("Dropdown");const Ae=F({trigger:Z.trigger,placement:Q.placement,disabled:Z.disabled,visible:S.visible,transition:S.transition,popperOptions:Q.popperOptions,tabindex:Q.tabindex,content:S.content,popperStyle:S.popperStyle,popperClass:S.popperClass,enterable:{...S.enterable,default:!0},effect:{...S.effect,default:"light"},teleported:S.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),ze={"update:visible":t=>de(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},De="onUpdate:visible",qe=W({name:"ElPopover"}),Ke=W({...qe,props:Ae,emits:ze,setup(t,{expose:r,emit:u}){const e=t,a=z(()=>e[De]),l=pe("popover"),d=_(),m=z(()=>{var s;return(s=g(d))==null?void 0:s.popperRef}),v=z(()=>[{width:ce(e.width)},e.popperStyle]),p=z(()=>[l.b(),e.popperClass,{[l.m("plain")]:!!e.content}]),c=z(()=>e.transition===`${l.namespace.value}-fade-in-linear`),y=()=>{var s;(s=d.value)==null||s.hide()},w=()=>{u("before-enter")},$=()=>{u("before-leave")},I=()=>{u("after-enter")},x=()=>{u("update:visible",!1),u("after-leave")};return r({popperRef:m,hide:y}),(s,K)=>(h(),Y(g(ae),fe({ref_key:"tooltipRef",ref:d},s.$attrs,{trigger:s.trigger,placement:s.placement,disabled:s.disabled,visible:s.visible,transition:s.transition,"popper-options":s.popperOptions,tabindex:s.tabindex,content:s.content,offset:s.offset,"show-after":s.showAfter,"hide-after":s.hideAfter,"auto-close":s.autoClose,"show-arrow":s.showArrow,"aria-label":s.title,effect:s.effect,enterable:s.enterable,"popper-class":g(p),"popper-style":g(v),teleported:s.teleported,persistent:s.persistent,"gpu-acceleration":g(c),"onUpdate:visible":g(a),onBeforeShow:w,onBeforeHide:$,onShow:I,onHide:x}),{content:f(()=>[s.title?(h(),V("div",{key:0,class:ne(g(l).e("title")),role:"title"},q(s.title),3)):ee("v-if",!0),P(s.$slots,"default",{},()=>[j(q(s.content),1)])]),default:f(()=>[s.$slots.reference?P(s.$slots,"reference",{key:0}):ee("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var je=te(Ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const le=(t,r)=>{const u=r.arg||r.value,e=u==null?void 0:u.popperRef;e&&(e.triggerRef=t)};var He={mounted(t,r){le(t,r)},updated(t,r){le(t,r)}};const Ye="popover",We=me(He,Ye),Fe=ve(je,{directive:We});const Ge={__name:"table",props:{data:{type:Array,default:()=>[]},maxHeight:{type:Number,default:void 0},editRowKey:{type:String,default:""},editCloseBefore:{type:Function,default:void 0},checkResult:{type:Array,default:()=>[]}},emits:["edit-open","edit-close"],setup(t,{expose:r,emit:u}){const e=t,a=_(""),l=_("");let d=null;const m=E=>{d=E};D("edit-cell",{editRowId:a,editProp:l,editRowKey:e.editRowKey}),D("updateEditCellEl",m),D("check-result",e.checkResult);const v=_(null),p=_(!1),c=_(null),y=_("");let w=null;const $=()=>{!a.value||!l.value||(u("edit-close",w,l.value),a.value="",l.value="",d=null)},I=(E,B,U,k)=>{const n=B.property;d!=null&&d.contains(k.target)||($(),p.value=!1,w=E,a.value=E[e.editRowKey],l.value=n,u("edit-open",E,n))},x=E=>{!a.value||!l.value||d!=null&&d.contains(E.target)||e.editCloseBefore(E)!==!1&&$()},s=(E,B,U)=>{const k=U.querySelector(".tooltip");if(!k)return;const n=document.createRange();n.setStart(k,0),n.setEnd(k,k.childNodes.length);const o=n.getBoundingClientRect().width,b=window.getComputedStyle(k),C=parseInt(b.getPropertyValue("padding-left"))+parseInt(b.getPropertyValue("padding-right")),M=k.getBoundingClientRect().width;o+C-M>.02&&(c.value=k,p.value=!0,y.value=k.innerText)},K=(E,B)=>{w=E,a.value=E[e.editRowKey],l.value=B};return L(()=>{document.addEventListener("mouseup",x)}),_e(()=>{document.removeEventListener("mouseup",x)}),r({ref:v,openEditCell:K}),(E,B)=>{const U=we,k=ae;return h(),V("div",null,[i(U,{ref_key:"tableRef",ref:v,data:t.data,border:"",stripe:"","max-height":t.maxHeight,onCellClick:I,onCellMouseEnter:s},{default:f(()=>[P(E.$slots,"default",{},void 0,!0)]),_:3},8,["data","max-height"]),i(k,{visible:p.value,"onUpdate:visible":B[0]||(B[0]=n=>p.value=n),"virtual-ref":c.value,"virtual-triggering":"",content:y.value,placement:"top",teleported:!1},null,8,["visible","virtual-ref","content"])])}}},Je=T(Ge,[["__scopeId","data-v-68625e30"]]),Qe={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Xe=G("path",{fill:"currentColor",d:"m199.04 672.64l193.984 112l224-387.968l-193.92-112l-224 388.032zm-23.872 60.16l32.896 148.288l144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112l56.704-98.112l-193.984-112l-56.64 98.112zM104.32 708.8l384-665.024l304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z"},null,-1),Ze=[Xe];function et(t,r){return h(),V("svg",Qe,Ze)}const tt={name:"ep-edit-pen",render:et};const lt={__name:"table-edit-cell",setup(t){const r=H("updateEditCellEl"),u=_(null);return L(()=>{r(u.value)}),(e,a)=>(h(),V("div",{ref_key:"editCellRef",ref:u,class:"editor"},[P(e.$slots,"default",{},void 0,!0)],512))}},ot=T(lt,[["__scopeId","data-v-72e605d0"]]);const nt={key:0,class:"required"},at={class:"label"},rt={__name:"table-column",props:{prop:{type:String,default:""},label:{type:String,default:""},minWidth:{type:Number,default:void 0},required:{type:Boolean,default:!1}},setup(t){const{editRowId:r,editProp:u,editRowKey:e}=H("edit-cell"),a=H("check-result");function l(d,m){const v=a.find(p=>p[e]===d);if(v)return v[m]}return(d,m)=>{const v=tt,p=ye,c=re;return h(),Y(c,{prop:t.prop,"min-width":t.minWidth,"class-name":"editor-column"},{header:f(()=>[t.required?(h(),V("i",nt,"*")):ee("",!0),G("span",at,q(t.label),1),i(p,null,{default:f(()=>[i(v)]),_:1})]),default:f(({row:y})=>[g(r)===y[g(e)]&&g(u)===t.prop?(h(),Y(ot,{key:0},{default:f(()=>[P(d.$slots,"default",{},void 0,!0)]),_:3})):(h(),V("div",{key:1,class:ne(["no-editor","tooltip",l(y[g(e)],t.prop)])},q(y[t.prop]),3))]),_:3},8,["prop","min-width"])}}},N=T(rt,[["__scopeId","data-v-85b2b37a"]]);const st={__name:"cell-input",props:{modelValue:{type:String,default:""},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(t,{emit:r}){const u=t,e=_(null);function a(){e.value.focus()}function l(){const d=u.modelValue.trim();r("update:model-value",d)}return L(()=>{u.autofocus&&a()}),(d,m)=>{const v=se;return h(),V("div",null,[i(v,{ref_key:"inputRef",ref:e,"model-value":t.modelValue,placeholder:"请输入","onUpdate:modelValue":m[0]||(m[0]=p=>d.$emit("update:model-value",p)),onBlur:l},null,8,["model-value"])])}}},X=T(st,[["__scopeId","data-v-abc8bb0b"]]);const it={__name:"cell-date",props:{modelValue:{type:String,default:""},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(t,{expose:r}){const u=t,e=_(null),a=_(null),l=`date-prper-${Date.now()}`;function d(){e.value.focus()}return L(()=>{u.autofocus&&d(),a.value=document.querySelector(`.${l}`)}),r({popoverEl:a}),(m,v)=>{const p=$e;return h(),V("div",null,[i(p,{ref_key:"dateRef",ref:e,"model-value":t.modelValue,type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期","popper-class":l,"onUpdate:modelValue":v[0]||(v[0]=c=>m.$emit("update:model-value",c))},null,8,["model-value"])])}}},ut=T(it,[["__scopeId","data-v-5a5a0484"]]);const dt={__name:"cell-select",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(t,{expose:r}){const u=t,e=_(null),a=_(null);function l(){e.value.toggleMenu()}return L(()=>{u.autofocus&&l(),a.value=e.value.popperPaneRef}),r({popoverEl:a}),(d,m)=>{const v=Ie,p=Se;return h(),V("div",null,[i(p,{ref_key:"selectRef",ref:e,"model-value":t.modelValue,placeholder:"请选择",clearable:"",filterable:"","onUpdate:modelValue":m[0]||(m[0]=c=>d.$emit("update:model-value",c))},{default:f(()=>[(h(!0),V(J,null,be(t.options,c=>(h(),Y(v,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["model-value"])])}}},oe=T(dt,[["__scopeId","data-v-813626ed"]]);const pt={__name:"textarea-popover",props:{modelValue:{type:String,default:""},autofocus:{type:Boolean,default:!0}},emits:["update:model-value"],setup(t,{expose:r,emit:u}){const e=t,a=_(null),l=_(null),d=_(null),m=_(null),v=e.modelValue;function p(){d.value.focus()}function c(){const y=e.modelValue.trim();u("update:model-value",y)}return L(()=>{e.autofocus&&p(),m.value=l.value.popperRef.contentRef}),r({popoverEl:m}),(y,w)=>{const $=se,I=Fe;return h(),V(J,null,[G("div",{ref_key:"virtualRef",ref:a,class:"trigger"},q(g(v)),513),i(I,{ref_key:"popoverRef",ref:l,visible:"","virtual-ref":a.value,trigger:"click","virtual-triggering":"",placement:"bottom-start",width:200},{default:f(()=>[i($,{ref_key:"inputRef",ref:d,"model-value":t.modelValue,type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入","onUpdate:modelValue":w[0]||(w[0]=x=>y.$emit("update:model-value",x)),onBlur:c},null,8,["model-value"])]),_:1},8,["virtual-ref"])],64)}}},ct=T(pt,[["__scopeId","data-v-8839fea6"]]);const A="id",ft={__name:"index",setup(t){const r=_(null);let u=400;const e=_([{id:"1",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""},{id:"2",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""},{id:"3",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""},{id:"4",date:"2016-05-03",name:"张三",province:"黑龙江",city:"哈尔滨",address:"南岗区-哈尔滨大街501号",zip:"000000",remark:""}]),a=_(null),l=_(""),d=_(!0),m=_([]),v=[],p=["date","name","province","city","address"],c=[{province:"黑龙江",citys:["哈尔滨","齐齐哈尔","鸡西","鹤岗"]},{province:"吉林",citys:["长春","通化","白山","四平"]},{province:"辽宁",citys:["辽阳","大连","鞍山","抚顺"]}];let y=[],w=[];const $=n=>{let o={id:n};v.forEach(b=>{o[b]=""}),m.value.push(o)},I=(n,o,b)=>{const C=m.value.find(M=>M[A]===n);C&&(C[o]=b)};e.value.forEach(n=>{$(n[A])});const x=n=>{if(!n.province){n.city="";return}const o=n.city,{citys:b}=c.find(C=>C.province===n.province);b.includes(o)||(n.city="")},s=(n,o)=>{if(l.value=n[o],d.value=!0,o==="province")y=c.map(b=>b.province);else if(o==="city")if(n.province){const{citys:b}=c.find(C=>C.province===n.province);w=b}else w=[]},K=n=>{var o;if((o=a.value.popoverEl)!=null&&o.contains(n.target))return!1},E=(n,o)=>{p.includes(o)&&(l.value?n[o]!==l.value&&I(n[A],o,"success"):I(n[A],o,"error")),n[o]=l.value,o==="province"&&x(n)};function B(){const n=`${Date.now()}-${e.value.length+1}`;e.value.push({id:n,date:"",name:"",province:"",city:"",address:"",zip:"",remark:""}),d.value=!1,$(n),ge(()=>{r.value.ref.setScrollTop(u),r.value.ref.setScrollLeft(0);const o=e.value[e.value.length-1];r.value.openEditCell(o,"date")})}const U=n=>{const o=e.value.findIndex(b=>b.id===n);o>=0&&e.value.splice(o,1)};function k(n){let o=!1;if(e.value.forEach(b=>{for(const C in b)p.includes(C)&&!b[C]&&(o=!0,I(b[A],C,"error"))}),o){Be.alert("必填项未填写","",{confirmButtonText:"确认",type:"error",callback:()=>{}});return}new Promise(b=>{setTimeout(()=>{b()},500)}).then(()=>{n&&n()})}return(n,o)=>{const b=he,C=Ve,M=re;return h(),V(J,null,[i(C,{justify:"end",class:"add-wrapper"},{default:f(()=>[i(b,{type:"primary",plain:"",onClick:B},{default:f(()=>[j("新增")]),_:1})]),_:1}),i(Je,{ref_key:"tableRef",ref:r,data:e.value,"check-result":m.value,"max-height":g(u),"edit-row-key":A,"edit-close-before":K,onEditOpen:s,onEditClose:E},{default:f(()=>[i(M,{type:"index",fixed:"",label:"序号",width:"70"}),i(N,{prop:"date",label:"日期","min-width":140,required:""},{default:f(()=>[i(ut,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=R=>l.value=R),autofocus:d.value},null,8,["modelValue","autofocus"])]),_:1}),i(N,{prop:"name",label:"名字","min-width":120,required:""},{default:f(()=>[i(X,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=R=>l.value=R)},null,8,["modelValue"])]),_:1}),i(N,{prop:"province",label:"省份","min-width":120,required:""},{default:f(()=>[i(oe,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=R=>l.value=R),options:g(y)},null,8,["modelValue","options"])]),_:1}),i(N,{prop:"city",label:"城市","min-width":120,required:""},{default:f(()=>[i(oe,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=R=>l.value=R),options:g(w)},null,8,["modelValue","options"])]),_:1}),i(N,{prop:"address",label:"地址","min-width":170,required:""},{default:f(()=>[i(X,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[4]||(o[4]=R=>l.value=R)},null,8,["modelValue"])]),_:1}),i(N,{prop:"zip",label:"邮编","min-width":120},{default:f(()=>[i(X,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[5]||(o[5]=R=>l.value=R)},null,8,["modelValue"])]),_:1}),i(N,{prop:"remark",label:"备注","min-width":180},{default:f(()=>[i(ct,{ref_key:"editorRef",ref:a,modelValue:l.value,"onUpdate:modelValue":o[6]||(o[6]=R=>l.value=R)},null,8,["modelValue"])]),_:1}),i(M,{label:"操作","min-width":"70",fixed:"right"},{default:f(({row:R})=>[i(C,null,{default:f(()=>[i(b,{link:"",type:"primary",onClick:bt=>U(R.id)},{default:f(()=>[j("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","check-result","max-height"]),i(C,{justify:"center",class:"save-wrapper"},{default:f(()=>[i(b,{type:"primary",onClick:o[7]||(o[7]=R=>k())},{default:f(()=>[j("保存")]),_:1})]),_:1})],64)}}},mt=T(ft,[["__scopeId","data-v-57603e3e"]]);const vt=t=>(Ee("data-v-9ab8e706"),t=t(),Ce(),t),_t=vt(()=>G("div",{class:"title"},"表格编辑",-1)),yt={__name:"table",setup(t){return(r,u)=>{const e=ke,a=Re;return h(),V(J,null,[_t,i(a,{"model-value":"1"},{default:f(()=>[i(e,{label:"单元格编辑",name:"1"},{default:f(()=>[i(mt)]),_:1})]),_:1})],64)}}},Tt=T(yt,[["__scopeId","data-v-9ab8e706"]]);export{Tt as default};
